(()=>{var e={};e.id=3546,e.ids=[3546],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13390:(e,t,o)=>{"use strict";o.r(t),o.d(t,{patchFetch:()=>g,routeModule:()=>l,serverHooks:()=>I,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>c});var r={};o.r(r),o.d(r,{PATCH:()=>d});var a=o(96559),s=o(48088),i=o(37719),n=o(32190),u=o(13641),p=o(69812);async function d(e,{params:t}){if("phase-production-build"===process.env.NEXT_PHASE||"phase-production-server"===process.env.NEXT_PHASE||"phase-static"===process.env.NEXT_PHASE||"phase-export"===process.env.NEXT_PHASE)return n.NextResponse.json({error:"Service temporarily unavailable"},{status:503});try{let{id:o}=await t,r=await e.json().catch(()=>({})),a=p.PQ.safeParse(r);if(!a.success)return n.NextResponse.json({error:"VALIDATION_ERROR",message:"Body inv\xe1lido"},{status:400});let{ativo:s}=a.data,i=parseInt(o);if(isNaN(i))return n.NextResponse.json({error:"INVALID_ID",message:"ID de usu\xe1rio inv\xe1lido"},{status:400});return await u.z.$executeRaw`
      UPDATE Usuario 
      SET status = ${s?"ATIVO":"INATIVO"}, 
          atualizadoEm = NOW()
      WHERE id = ${i}
    `,n.NextResponse.json({ok:!0,message:`Usu\xe1rio ${s?"ativado":"desativado"} com sucesso`})}catch(e){return console.error("Erro ao alterar status:",e),n.NextResponse.json({error:"INTERNAL_ERROR",message:"Erro interno do servidor"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/usuarios/[id]/status/route",pathname:"/api/usuarios/[id]/status",filename:"route",bundlePath:"app/api/usuarios/[id]/status/route"},resolvedPagePath:"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\api\\usuarios\\[id]\\status\\route.ts",nextConfigOutput:"standalone",userland:r}),{workAsyncStorage:m,workUnitAsyncStorage:c,serverHooks:I}=l;function g(){return(0,i.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:c})}},13641:(e,t,o)=>{"use strict";o.d(t,{z:()=>r.z});var r=o(31183)},16698:e=>{"use strict";e.exports=require("node:async_hooks")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31183:(e,t,o)=>{"use strict";o.d(t,{z:()=>a});var r=o(29942);let a=global.__prisma??new r.PrismaClient({log:["error"]})},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69812:(e,t,o)=>{"use strict";o.d(t,{B0:()=>c,Dm:()=>x,E9:()=>v,KS:()=>g,PQ:()=>k,X5:()=>l,Zk:()=>f,cQ:()=>S,if:()=>N,rf:()=>m,tT:()=>I,yp:()=>E});var r=o(24501);let a=r.Yj().email("Email inv\xe1lido").max(255,"Email muito longo").toLowerCase().trim(),s=r.Yj().min(6,"Senha deve ter pelo menos 6 caracteres").max(128,"Senha muito longa").refine(e=>!!/[a-z]/.test(e)&&!!/[A-Z0-9]/.test(e),"Senha deve conter pelo menos: 1 letra min\xfascula e 1 mai\xfascula ou n\xfamero"),i=r.Yj().min(2,"Nome deve ter pelo menos 2 caracteres").max(100,"Nome muito longo").trim().refine(e=>/^[a-zA-ZÀ-ÿ\s]+$/.test(e),"Nome deve conter apenas letras e espa\xe7os"),n=r.Yj().length(4,"PIN deve ter exatamente 4 d\xedgitos").refine(e=>/^\d{4}$/.test(e),"PIN deve conter apenas n\xfameros"),u=r.Yj().length(6,"C\xf3digo MFA deve ter exatamente 6 d\xedgitos").refine(e=>/^\d{6}$/.test(e),"C\xf3digo MFA deve conter apenas n\xfameros"),p=r.Yj().min(5,"Pergunta de seguran\xe7a muito curta").max(200,"Pergunta de seguran\xe7a muito longa").trim(),d=r.Yj().min(2,"Resposta muito curta").max(100,"Resposta muito longa").trim().toLowerCase(),l=r.Ik({email:a,password:r.Yj().min(1,"Senha \xe9 obrigat\xf3ria")}),m=r.Ik({userId:r.ai().int().positive("ID do usu\xe1rio inv\xe1lido"),code:u,tipoAcao:r.k5(["LOGIN","PRIMEIRO_ACESSO","RESET_PASSWORD"]).optional()}),c=r.Ik({email:a});r.Ik({userId:r.ai().int().positive("ID do usu\xe1rio inv\xe1lido"),novaSenha:s,pin:n,perguntaSeguranca:p,respostaSeguranca:d});let I=r.Ik({userId:r.ai().int().positive("ID do usu\xe1rio inv\xe1lido"),newPassword:s,pin:n,securityQuestion:p,securityAnswer:d});r.Ik({token:r.Yj().min(1,"Token \xe9 obrigat\xf3rio"),novaSenha:s});let g=r.Ik({token:r.Yj().min(1,"Token \xe9 obrigat\xf3rio"),senha:s}),v=r.Ik({email:a}),x=r.Ik({email:a});r.Ik({nomeCompleto:i,email:a,tipo:r.k5(["ADMIN","USUARIO","CLIENTE"]),departamento:r.Yj().max(100,"Departamento muito longo").optional(),cargo:r.Yj().max(100,"Cargo muito longo").optional()}),r.Ik({nomeCompleto:i.optional(),email:a.optional(),tipo:r.k5(["ADMIN","USUARIO","CLIENTE"]).optional(),departamento:r.Yj().max(100,"Departamento muito longo").optional(),cargo:r.Yj().max(100,"Cargo muito longo").optional(),status:r.k5(["ATIVO","INATIVO","SUSPENSO"]).optional()}).refine(e=>Object.keys(e).length>0,"Pelo menos um campo deve ser fornecido para atualiza\xe7\xe3o");let E=r.gM("method",[r.Ik({method:r.eu("pin"),userId:r.ai().int().positive("ID do usu\xe1rio inv\xe1lido"),pin:n}),r.Ik({method:r.eu("security"),userId:r.ai().int().positive("ID do usu\xe1rio inv\xe1lido"),answer:d})]),f=r.Ik({userId:r.ai().int().positive("ID do usu\xe1rio inv\xe1lido"),tipoAcao:r.k5(["LOGIN","PRIMEIRO_ACESSO","RESET_PASSWORD","RESET","DESBLOQUEIO"]).optional()}),A=r.Ik({nomeCompleto:r.Yj().optional(),email:a,role:r.Yj().optional(),ativo:r.zM().optional(),criadoEm:r.KC([r.Yj(),r.ai(),r.p6()]).optional()}),N=r.Ik({filename:r.Yj().min(1).max(128).optional(),users:r.YO(A).min(1)}),S=r.Ik({email:a.optional(),nomeCompleto:i.optional(),role:r.k5(["ADMIN","GERENTE","USUARIO","FINANCEIRO","ESTOQUE","CLIENTE"]).optional(),status:r.k5(["ATIVO","INATIVO"]).optional(),telefone:r.Yj().max(32).optional().or(r.eu("")).transform(e=>e||void 0).refine(e=>{if(!e)return!0;let t=e.replace(/\D/g,"");return t.length>=10&&t.length<=11},"Telefone deve ter entre 10 e 11 d\xedgitos. Exemplo: (11)99999-9999"),dataNascimento:r.KC([r.Yj(),r.p6()]).optional().transform(e=>{if(!e)return;if(e instanceof Date){if(isNaN(e.getTime()))return;let t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${r}`}let t=String(e).trim();if(t.match(/^(\d{4})-(\d{2})-(\d{2})$/))return t;let o=t.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(o){let[,e,t,r]=o,a=parseInt(t,10),s=parseInt(e,10);if(s<1||s>12||a<1||a>31)return"INVALID_DATE";let i=t.padStart(2,"0"),n=e.padStart(2,"0");return`${r}-${n}-${i}`}return"INVALID_DATE"}).refine(e=>!e||"INVALID_DATE"!==e&&!isNaN(new Date(e+"T00:00:00.000Z").getTime()),"Data de nascimento inv\xe1lida. Use o formato MM/DD/YYYY (ex: 05/18/1979)"),endereco1:r.Yj().max(191).optional().or(r.eu("")).transform(e=>e||void 0),endereco2:r.Yj().max(191).optional().or(r.eu("")).transform(e=>e||void 0),cidade:r.Yj().max(96).optional().or(r.eu("")).transform(e=>e||void 0),estado:r.Yj().max(32).optional().or(r.eu("")).transform(e=>e||void 0),cep:r.Yj().max(16).optional().or(r.eu("")).transform(e=>e||void 0).refine(e=>{if(!e)return!0;let t=e.replace(/\D/g,"");return t.length>=5&&t.length<=9&&t===e.replace(/\D/g,"")},"CEP deve conter apenas n\xfameros. Exemplo: 01234567"),anotacoes:r.Yj().optional().or(r.eu("")).transform(e=>e&&e.trim().length>0?e:void 0)}),k=r.Ik({ativo:r.zM()})},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},78474:e=>{"use strict";e.exports=require("node:events")},96487:()=>{}};var t=require("../../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[7719,580,9942,4501],()=>o(13390));module.exports=r})();