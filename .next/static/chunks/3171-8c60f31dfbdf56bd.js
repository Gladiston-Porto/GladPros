"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3171],{14827:(e,t,a)=>{a.d(t,{ConfirmProvider:()=>i,S:()=>n});var r=a(95155),s=a(12115);let l=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,s.useState)(!1),[n,o]=(0,s.useState)({}),d=(0,s.useRef)(void 0),c=(0,s.useCallback)(e=>(o(e||{}),i(!0),new Promise(e=>{d.current=e})),[]),h=e=>{i(!1);let t=d.current;d.current=void 0,t&&t(e)};return(0,r.jsx)(l.Provider,{value:{confirm:c,Dialog:()=>{if(!a)return null;let e=n.title||"Confirmar",t=n.message||"Deseja prosseguir?",s=n.confirmText||"Confirmar",l=n.cancelText||"Cancelar",i="danger"===n.tone;return(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>h(!1)}),(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-sm overflow-hidden rounded-xl border border-white/10 bg-white p-4 text-slate-900 shadow-xl",children:[(0,r.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:e}),(0,r.jsx)("p",{className:"mb-4 text-sm text-slate-600",children:t}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>h(!1),className:"rounded-md border px-3 py-2 text-sm",children:l}),(0,r.jsx)("button",{onClick:()=>h(!0),className:"rounded-md px-3 py-2 text-sm text-white ".concat(i?"bg-red-600 hover:bg-red-700":"bg-slate-900 hover:bg-slate-800"),children:s})]})]})]})}},children:t})}function n(){let e=(0,s.useContext)(l);if(!e)throw Error("useConfirm must be used inside ConfirmProvider");return e}},53171:(e,t,a)=>{a.d(t,{Panel:()=>I,default:()=>D});var r=a(95155),s=a(12115),l=a(66766),i=a(6874),n=a.n(i),o=a(35695),d=a(38274),c=a(60760),h=a(73783),x=a(17580),m=a(90232),g=a(57434),u=a(17576),b=a(37108),p=a(55868),f=a(47924),w=a(23861),j=a(93509),v=a(62098),N=a(381),y=a(13052),k=a(42355),_=a(34835),A=a(14827),E=a(67280);let C=[{href:"/dashboard",label:"Dashboard",icon:h.A},{href:"/clientes",label:"Clientes",icon:x.A},{href:"/usuarios",label:"Usu\xe1rios",icon:m.A},{href:"/propostas",label:"Propostas",icon:g.A},{href:"/projetos",label:"Projetos",icon:u.A},{href:"/estoque",label:"Estoque",icon:b.A},{href:"/financeiro",label:"Financeiro",icon:p.A}],S={ADMIN:{chip:"bg-[#3E4095] text-white",glow:"shadow-[0_0_0_3px_rgba(62,64,149,0.2)]"},GERENTE:{chip:"bg-[#0098DA] text-white",glow:"shadow-[0_0_0_3px_rgba(0,152,218,0.2)]"},FINANCEIRO:{chip:"bg-[#F58634] text-white",glow:"shadow-[0_0_0_3px_rgba(245,134,52,0.2)]"},USUARIO:{chip:"bg-[#3E4095] text-white",glow:"shadow-[0_0_0_3px_rgba(62,64,149,0.2)]"},ESTOQUE:{chip:"bg-[#0098DA] text-white",glow:"shadow-[0_0_0_3px_rgba(0,152,218,0.2)]"},CLIENTE:{chip:"bg-[#ED3237] text-white",glow:"shadow-[0_0_0_3px_rgba(237,50,55,0.2)]"}};function D(e){let{user:t,children:a,nav:l=C}=e,i=(0,o.usePathname)(),{theme:n,setTheme:d}=(0,E.D)(),[c,h]=(0,s.useState)(!1),{confirm:x,Dialog:m}=(0,A.S)(),[g,u]=(0,s.useState)(!1),b=(0,s.useMemo)(()=>S[(null==t?void 0:t.role)||"USUARIO"],[null==t?void 0:t.role]),p=async()=>{if(!g&&await x({title:"Sair",message:"Deseja encerrar a sess\xe3o?",confirmText:"Sair",tone:"danger"})){u(!0);try{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){}localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userId")}finally{window.location.href="/login",u(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen w-full overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800","data-testid":"shell-root",children:[(0,r.jsx)(O,{collapsed:c,roleTheme:b,user:t,theme:n,onToggleTheme:()=>{d("light"===n?"dark":"light")}}),(0,r.jsx)(P,{nav:l,activeHref:i||"/dashboard",collapsed:c,onToggle:()=>h(e=>!e),onLogout:p,isLoggingOut:g}),(0,r.jsx)("div",{className:"".concat(c?"pl-[84px]":"pl-[280px]"," pt-16 transition-all"),children:(0,r.jsx)("main",{className:"mx-auto max-w-[1440px] p-4 sm:p-6","data-testid":"shell-content",children:a})}),(0,r.jsx)(m,{})]})}function O(e){let{collapsed:t,roleTheme:a,user:s,theme:i,onToggleTheme:n}=e;return(0,r.jsx)("header",{className:"fixed left-0 right-0 top-0 z-30 border-b border-white/30 bg-white/90 backdrop-blur-md dark:border-white/10 dark:bg-gray-900/90",children:(0,r.jsxs)("div",{className:"mx-auto flex h-16 max-w-[1440px] items-center justify-between gap-3 px-4 ".concat(t?"pl-24":"pl-72"," transition-all"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-title text-base opacity-70",children:"GladPros"}),(0,r.jsx)("span",{className:"ml-1 rounded-full px-2 py-0.5 text-[10px] ".concat(a.chip),children:s.role})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative hidden md:flex",children:[(0,r.jsx)(f.A,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-400"}),(0,r.jsx)("input",{placeholder:"Buscar…",className:"w-[260px] rounded-xl border border-gray-300 bg-white px-9 py-2 text-sm outline-none ring-0 placeholder:text-gray-400 focus:border-[#0098DA] focus:ring-2 focus:ring-[#0098DA]/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),(0,r.jsxs)("button",{className:"relative rounded-xl p-2 transition hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Alertas",children:[(0,r.jsx)(w.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"absolute -right-1 -top-1 grid h-4 w-4 place-content-center rounded-full bg-[#ED3237] text-[10px] text-white",children:"3"})]}),(0,r.jsx)("button",{onClick:n,className:"rounded-xl p-2 transition hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Alternar tema",children:"light"===i?(0,r.jsx)(j.A,{className:"h-5 w-5"}):(0,r.jsx)(v.A,{className:"h-5 w-5"})}),(0,r.jsx)("button",{className:"rounded-xl p-2 transition hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Configura\xe7\xf5es",children:(0,r.jsx)(N.A,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"ml-1 hidden items-center gap-2 rounded-2xl border border-gray-300 bg-white px-2 py-1 dark:border-gray-600 dark:bg-gray-700 md:flex ".concat(a.glow),children:[(0,r.jsx)(l.default,{src:s.avatarUrl||"/images/LOGO_200.png",width:32,height:32,className:"h-8 w-8 rounded-full border border-gray-300 dark:border-gray-600 object-cover",alt:"avatar",onError:e=>{let t=e.target;t.src.endsWith("/images/LOGO_200.png")||(t.src="/images/LOGO_200.png")}}),(0,r.jsxs)("div",{className:"mr-1 hidden sm:block",children:[(0,r.jsx)("div",{className:"text-xs",children:s.name}),(0,r.jsx)("div",{className:"text-[10px] opacity-60",children:"Sess\xe3o ativa"})]})]})]})]})})}function P(e){let{nav:t,activeHref:a,collapsed:s,onToggle:i,onLogout:n,isLoggingOut:o=!1}=e;return(0,r.jsx)("aside",{className:"fixed left-0 top-0 z-40 h-screen ".concat(s?"w-[84px]":"w-[280px]"," transition-all"),"aria-label":"Sidebar","data-testid":"shell-sidebar",children:(0,r.jsxs)("div",{className:"relative flex h-full flex-col border-r border-blue-200/50 bg-gradient-to-b from-[#3E4095] to-[#0098DA] text-white dark:border-blue-800/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-4 py-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:s?(0,r.jsx)("div",{className:"grid h-10 w-10 place-content-center rounded-xl bg-white/10 font-title shadow-md overflow-hidden",children:(0,r.jsx)(l.default,{src:"/images/LOGO_ICONE2.png",alt:"GP",width:36,height:36})}):(0,r.jsx)("div",{className:"relative h-9 w-[140px] leading-tight",children:(0,r.jsx)(l.default,{src:"/images/LOGO_200.png",alt:"GladPros",fill:!0,className:"object-contain",sizes:"140px",priority:!0})})}),(0,r.jsx)("button",{onClick:i,className:"rounded-xl p-2 hover:bg-white/10","aria-label":"Alternar sidebar",children:s?(0,r.jsx)(y.A,{className:"h-5 w-5"}):(0,r.jsx)(k.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("nav",{className:"mt-2 flex-1 px-2",children:t.map((e,t)=>(0,r.jsx)(T,{href:e.href,icon:e.icon,label:e.label,active:a===e.href||(null==a?void 0:a.startsWith(e.href))&&"/"!==e.href,collapsed:s,delay:.03*t},e.href))}),(0,r.jsxs)("div",{className:"px-3 pb-4 pt-2",children:[(0,r.jsx)("button",{onClick:n,disabled:o,className:"flex w-full items-center justify-center gap-2 rounded-2xl px-3 py-2 text-sm text-white shadow ".concat(o?"bg-[#ED3237]/80 opacity-80 cursor-not-allowed":"bg-[#ED3237] hover:brightness-110"),"data-testid":"sidebar-logout","aria-busy":o,children:o?(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,r.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white/40 border-t-white"}),!s&&(0,r.jsx)("span",{children:"Saindo…"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.A,{className:"h-4 w-4"}),!s&&(0,r.jsx)("span",{children:"Sair"})]})}),(0,r.jsx)("div",{className:"mt-3 text-center text-[10px] opacity-70",children:"v0.3 • Shell \xdanico"})]})]})})}function T(e){let{href:t,icon:a,label:s,active:l,collapsed:i,delay:o=0}=e;return(0,r.jsx)(n(),{href:t,className:"block focus:outline-none",children:(0,r.jsxs)(d.P.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{delay:o},title:i?s:void 0,className:"my-1 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm transition hover:bg-white/10 ".concat(l?"bg-white/15":"opacity-90"),children:[(0,r.jsx)(a,{className:"h-5 w-5 ".concat(l?"text-white":"text-white/80")}),(0,r.jsx)(c.N,{initial:!1,children:!i&&(0,r.jsx)(d.P.span,{initial:{opacity:0,x:-6},animate:{opacity:1,x:0},exit:{opacity:0,x:-6},className:"truncate",children:s})}),l&&(0,r.jsx)("span",{className:"ml-auto h-2 w-2 rounded-full bg-white/90"})]})})}function I(e){let{title:t,badge:a,className:s="",children:l}=e;return(0,r.jsxs)("div",{className:"rounded-3xl border border-gray-200 bg-white p-4 sm:p-5 shadow-lg dark:border-gray-700 dark:bg-gray-800 ".concat(s),"data-testid":"panel",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-title text-lg",children:t}),"number"==typeof a&&(0,r.jsx)("span",{className:"rounded-full bg-[#3E4095] px-2 py-0.5 text-xs text-white dark:bg-[#0098DA]",children:a})]}),l?(0,r.jsx)("div",{children:l}):(0,r.jsx)("div",{className:"grid h-44 place-content-center rounded-2xl border border-dashed border-gray-300 text-sm opacity-60 dark:border-gray-600",children:"\xc1rea para gr\xe1ficos/visualiza\xe7\xf5es"})]})}},67280:(e,t,a)=>{a.d(t,{D:()=>n,ThemeProvider:()=>i});var r=a(95155),s=a(12115);let l=(0,s.createContext)({theme:"dark",setTheme:e=>{}});function i(e){let{children:t}=e,[a,i]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{try{let e=localStorage.getItem("gp-theme"),t="light"===e||"dark"===e?e:"dark";i(t),document.documentElement.classList.toggle("dark","dark"===t)}catch(e){}},[]),(0,s.useEffect)(()=>{try{localStorage.setItem("gp-theme",a),document.documentElement.classList.toggle("dark","dark"===a)}catch(e){}},[a]),(0,r.jsx)(l.Provider,{value:{theme:a,setTheme:i},children:t})}function n(){return(0,s.useContext)(l)}}}]);