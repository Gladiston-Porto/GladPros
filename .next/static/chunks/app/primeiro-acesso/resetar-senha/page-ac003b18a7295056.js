(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{1842:(e,t,a)=>{"use strict";async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return new Promise(t=>setTimeout(t,e))}async function r(e){return(await s(300),"fail@example.com"===e.email)?{ok:!1,status:400,error:"Credenciais inv\xe1lidas"}:{ok:!0,status:200,data:{token:"stub-jwt-token",user:{email:e.email}}}}async function n(e){return await s(200),null==e||e.email,{ok:!0,status:200}}async function o(e){return(await s(200),e.token)?{ok:!0,status:200}:{ok:!1,status:400,error:"Token inv\xe1lido"}}a.d(t,{Ay:()=>u});var i=a(49509);let l=(()=>{try{var e;if(void 0!==i&&(null==i||null==(e=i.env)?void 0:e.NEXT_PUBLIC_USE_STUB)==="1")return!0}catch(e){}return!1})(),u={login:async function e(e){if(l){let t=await r(e);return{ok:!!t.ok,status:t.status||200,data:t.data,error:t.error}}let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.senha})}),a=await t.json().catch(()=>({}));return{ok:t.ok,status:t.status,data:a,error:null==a?void 0:a.error}},forgotPassword:async function e(e){if(l){let t=await n(e);return{ok:!!t.ok,status:t.status||200,error:t.error}}let t=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json().catch(()=>({}));return{ok:t.ok,status:t.status,data:a,error:null==a?void 0:a.error}},resetPassword:async function e(e){if(l){let t=await o(e);return{ok:!!t.ok,status:t.status||200,error:t.error}}let t=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json().catch(()=>({}));return{ok:t.ok,status:t.status,data:a,error:null==a?void 0:a.error}}}},37937:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(95155),r=a(12115);function n(e){let{title:t,children:a,onSubmit:r}=e;return(0,s.jsxs)("form",{onSubmit:r,className:"max-w-md w-full bg-white p-6 rounded shadow",children:[t&&(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:t}),a]})}function o(e){let{label:t="Enviar",disabled:a=!1}=e;return(0,s.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 rounded bg-blue-600 hover:bg-blue-500 text-white font-medium transition disabled:opacity-60",children:t})}function i(e){let{message:t}=e;return t?(0,s.jsx)("div",{className:"mb-3 rounded bg-red-100 text-red-700 text-sm px-3 py-2",role:"alert",children:t}):null}var l=a(1842);function u(){let[e,t]=(0,r.useState)(""),[a,u]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),[f,b]=(0,r.useState)(!1);async function p(t){t.preventDefault(),h(null),c(!0),b(!1);try{let t=await l.Ay.resetPassword({token:e,senha:a});if(!t.ok)throw Error(t.error||"Falha");b(!0)}catch(e){h(e instanceof Error?e.message:"Erro inesperado")}finally{c(!1)}}return(0,s.jsx)("main",{className:"min-h-screen w-full bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 flex items-center justify-center p-4",children:(0,s.jsxs)(n,{onSubmit:p,title:"Primeiro Acesso - Redefinir senha",children:[(0,s.jsx)("p",{className:"text-sm text-white/80 mb-3",children:"Cole aqui o token recebido por e-mail e escolha uma nova senha."}),(0,s.jsx)(i,{message:m}),f&&(0,s.jsx)("div",{className:"mb-3 rounded bg-green-100 text-green-700 text-sm px-3 py-2",children:"Senha redefinida (stub)"}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Token"}),(0,s.jsx)("input",{value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 rounded border"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Nova senha"}),(0,s.jsx)("input",{type:"password",value:a,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 rounded border"})]}),(0,s.jsx)(o,{label:d?"Enviandoâ€¦":"Redefinir",disabled:d||!e||!a})]})})}},56433:(e,t,a)=>{Promise.resolve().then(a.bind(a,37937))}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(56433)),_N_E=e.O()}]);