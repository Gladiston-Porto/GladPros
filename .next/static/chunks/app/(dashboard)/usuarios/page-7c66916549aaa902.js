(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3770],{16447:(e,t,r)=>{"use strict";r.d(t,{d:()=>s}),r(95155),r(12115);var a=r(64198);function s(){let e=(0,a.d)();return{showToast:t=>{let{title:r,message:a,type:s="info",duration:o}=t;if("number"==typeof o)return void e.addToast({title:null!=r?r:"",message:a,type:s,duration:o});switch(s){case"success":e.success(null!=r?r:"Sucesso",a);break;case"error":e.error(null!=r?r:"Erro",a);break;case"warning":e.warning(null!=r?r:"Aviso",a);break;default:e.info(null!=r?r:"",a)}}}}},21492:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},30781:(e,t,r)=>{"use strict";r.d(t,{TK:()=>d,g9:()=>h,hG:()=>u,kg:()=>i,lo:()=>l,wz:()=>c});let a="/api/usuarios";async function s(e){try{return await e.json()}catch(e){return null}}function o(e){let t={};for(let[r,a]of Object.entries(e))null!=a&&("string"!=typeof a||""!==a.trim())&&(t[r]=a);return t}function n(e){if(e){if(e instanceof Date&&!isNaN(e.getTime())){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(a)}return e}}async function l(e){var t,r,o,n;let l=function(e){let t=new URLSearchParams;return e?(Object.entries(e).forEach(e=>{let[r,a]=e;null!=a&&""!==a&&t.set(r,String(a))}),t.toString()):""}(e),i=l?"".concat(a,"?").concat(l):a,c=await fetch(i,{cache:"no-store",credentials:"include"});if(!c.ok){let e=await s(c);throw Error((null==e?void 0:e.error)||(null==e?void 0:e.message)||"HTTP ".concat(c.status))}let d=await c.json();return{items:null!=(t=d.items)?t:[],total:null!=(r=d.total)?r:0,page:null!=(o=d.page)?o:1,pageSize:null!=(n=d.pageSize)?n:20}}async function i(e){var t,r;let l=o({nomeCompleto:e.nomeCompleto,email:e.email,dataNascimento:n(e.dataNascimento),role:null!=(t=e.role)?t:"USUARIO",status:null!=(r=e.status)?r:"ATIVO",telefone:e.telefone,endereco1:e.endereco1,endereco2:e.endereco2,cidade:e.cidade,estado:e.estado,cep:e.cep,anotacoes:e.anotacoes}),i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}),c=await s(i);if(!i.ok){if((null==c?void 0:c.error)==="VALIDATION_ERROR"&&(null==c?void 0:c.fields)){let e=Error(c.message||"Erro de valida\xe7\xe3o");throw e.fields=c.fields,e}throw Error((null==c?void 0:c.error)||(null==c?void 0:c.message)||"HTTP ".concat(i.status))}return c}async function c(e){let t=await fetch("".concat(a,"/").concat(e),{cache:"no-store",credentials:"include"});if(!t.ok){let e=await s(t);throw Error((null==e?void 0:e.error)||(null==e?void 0:e.message)||"HTTP ".concat(t.status))}return await t.json()}async function d(e,t){let r=o({nomeCompleto:t.nomeCompleto,email:t.email,dataNascimento:n(t.dataNascimento),role:t.role,status:t.status,telefone:t.telefone,endereco1:t.endereco1,endereco2:t.endereco2,cidade:t.cidade,estado:t.estado,cep:t.cep,anotacoes:t.anotacoes}),l=await fetch("".concat(a,"/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}),i=await s(l);if(!l.ok){if((null==i?void 0:i.error)==="VALIDATION_ERROR"&&(null==i?void 0:i.fields)){let e=Error(i.message||"Erro de valida\xe7\xe3o");throw e.fields=i.fields,e}throw Error((null==i?void 0:i.error)||(null==i?void 0:i.message)||"HTTP ".concat(l.status))}return i}async function u(e){let t=await fetch("".concat(a,"/").concat(e),{method:"DELETE",credentials:"include"}),r=await s(t);if(!t.ok)throw Error((null==r?void 0:r.error)||(null==r?void 0:r.message)||"HTTP ".concat(t.status));return r}async function h(e,t){let r=await fetch("".concat(a,"/").concat(e,"/status"),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({ativo:t})}),o=await s(r);if(!r.ok)throw Error((null==o?void 0:o.error)||(null==o?void 0:o.message)||"HTTP ".concat(r.status));return o}},30971:(e,t,r)=>{"use strict";r.d(t,{default:()=>T});var a=r(95155),s=r(12115),o=r(6874),n=r.n(o),l=r(47924),i=r(91788),c=r(66474),d=r(19946);let u=(0,d.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usuarios",r=new Blob([["ID,Nome Completo,E-mail,N\xedvel,Telefone,Data Nascimento,Cidade,Estado,CEP,Status,Criado Em",...e.map(e=>[e.id,e.nomeCompleto||"",e.email,e.role||"",e.telefone||"",e.dataNascimento?new Date(e.dataNascimento).toLocaleDateString("pt-BR"):"",e.cidade||"",e.estado||"",e.cep||"",e.ativo?"Ativo":"Inativo",e.criadoEm?new Date(e.criadoEm).toLocaleDateString("pt-BR"):""]).map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(r);a.setAttribute("href",s),a.setAttribute("download","".concat(t,".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},x=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usuarios";try{let r=await fetch("/api/usuarios/export/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({users:e,filename:t})});if(!r.ok)throw Error("Erro na resposta do servidor");let a=await r.blob(),s=window.URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download="".concat(t,".pdf"),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(s)}catch(e){throw console.error("Erro ao gerar PDF:",e),e instanceof Error?e:Error("Erro ao gerar PDF")}};var m=r(16447);function p(e){var t;let{q:r,onQ:o,role:d,onRole:p,ativo:g,onAtivo:b,status:v,onStatus:f,total:y,showNew:w=!0,users:k=[],scope:j="selected",onExportAllFiltered:N,exporting:E=!1}=e,[C,S]=(0,s.useState)(!1),[A,T]=(0,s.useState)(j),D=(0,s.useRef)(null),{showToast:L}=(0,m.d)(),O=async e=>{S(!1);try{if("selected"===A){if(0===k.length)return void L({title:"Aviso",message:"Nenhum usu\xe1rio selecionado para exportar",type:"info"});"csv"===e?(h(k,"usuarios"),L({title:"Exportado",message:"CSV gerado com sucesso",type:"success"})):(await x(k,"usuarios"),L({title:"Exportado",message:"PDF gerado com sucesso",type:"success"}))}else{if(!N)return void L({title:"Erro",message:"Exporta\xe7\xe3o de todos os filtrados n\xe3o suportada",type:"error"});await N(e)}}catch(t){console.error("Erro na exporta\xe7\xe3o:",t),L({title:"Erro",message:"Erro ao exportar ".concat(e.toUpperCase()),type:"error"})}};return(0,s.useEffect)(()=>{let e=e=>{D.current&&!D.current.contains(e.target)&&S(!1)};if(C)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[C]),(0,a.jsxs)("div",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.A,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-400"}),(0,a.jsx)("input",{value:r,onChange:e=>o(e.target.value),placeholder:"Buscar por nome ou e-mail",className:"w-[260px] rounded-xl border border-black/10 bg-white px-9 py-2 text-sm outline-none placeholder:text-neutral-400 focus:border-[#0098DA] dark:border-white/10 dark:bg-gray-800 dark:text-white"})]}),(0,a.jsxs)("select",{value:d,onChange:e=>p(e.target.value),className:"rounded-xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-gray-800 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Todos os N\xedveis"}),["ADMIN","GERENTE","FINANCEIRO","USUARIO","ESTOQUE","CLIENTE"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:null!=(t=null!=g?g:v)?t:"",onChange:e=>{let t=e.target.value;b&&b(t),f&&f(t)},className:"rounded-xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-gray-800 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Status"}),(0,a.jsx)("option",{value:"true",children:"Ativos"}),(0,a.jsx)("option",{value:"false",children:"Inativos"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{value:A,onChange:e=>T(e.target.value),className:"rounded-2xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-gray-800 dark:text-white",title:"Escopo de exporta\xe7\xe3o",children:[(0,a.jsx)("option",{value:"selected",children:"Selecionados"}),(0,a.jsx)("option",{value:"allFiltered",children:"Todos os filtrados"})]}),(0,a.jsxs)("div",{className:"relative",ref:D,children:[(0,a.jsxs)("button",{onClick:()=>S(!C),disabled:E,className:"rounded-2xl border border-black/10 bg-white px-3 py-2 text-sm hover:bg-black/5 disabled:opacity-50 dark:border-white/10 dark:bg-white/5 flex items-center gap-1",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),E?"Exportando…":"Exportar",(0,a.jsx)(c.A,{className:"h-3 w-3"})]}),C&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-10",children:[(0,a.jsxs)("button",{onClick:()=>O("csv"),className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{children:"Exportar CSV"})]}),(0,a.jsxs)("button",{onClick:()=>O("pdf"),className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC4"}),(0,a.jsx)("span",{children:"Exportar PDF"})]})]})]}),w&&(0,a.jsxs)(n(),{href:"/usuarios/novo",className:"rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white shadow hover:brightness-110",children:[(0,a.jsx)(u,{className:"mr-1 inline h-4 w-4"}),"Novo Usu\xe1rio"]})]}),(0,a.jsxs)("div",{className:"text-xs opacity-60",children:[y.toLocaleString("pt-BR")," resultado(s)"]})]})}var g=r(89917),b=r(62525);let v=(0,d.A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var f=r(21492);let y={ADMIN:"bg-[#3E4095]/15 text-[#3E4095] dark:bg-[#3E4095]/20",GERENTE:"bg-[#0098DA]/15 text-[#0098DA] dark:bg-[#0098DA]/20",FINANCEIRO:"bg-[#F58634]/15 text-[#F58634] dark:bg-[#F58634]/20",USUARIO:"bg-neutral-500/15 text-neutral-700 dark:bg-neutral-500/20 dark:text-neutral-200",ESTOQUE:"bg-[#0098DA]/15 text-[#0098DA] dark:bg-[#0098DA]/20",CLIENTE:"bg-[#ED3237]/15 text-[#ED3237] dark:bg-[#ED3237]/20"};function w(e){let{role:t}=e;return(0,a.jsx)("span",{className:"rounded-full px-2 py-1 text-xs ".concat(y[t]),children:t})}let k=e=>!Array.isArray(e)&&null!==e&&"object"==typeof e&&"items"in e&&Array.isArray(e.items),j=e=>e?Array.isArray(e)?e:k(e)?e.items:[]:[];function N(e){let{data:t,onEdit:r,onDelete:o,onToggleStatus:n,onSelectedChange:l,sortKey:i="criadoEm",sortDir:c="desc",onSortChange:d}=e,[u,h]=(0,s.useState)(new Set);function x(e){let t=i===e&&"asc"===c?"desc":"asc";null==d||d(e,t)}let m=(0,s.useMemo)(()=>j(t),[t]),p=(0,s.useMemo)(()=>m.slice(),[m]),f=j(t).length,y=u.size>0&&u.size===f;return(0,a.jsxs)("div",{className:"overflow-x-auto rounded-2xl border border-black/10 bg-white dark:border-white/10 dark:bg-white/5",children:[(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left opacity-70",children:[(0,a.jsx)("th",{className:"px-3 py-2",children:(0,a.jsx)("input",{"aria-label":"Selecionar todos",type:"checkbox",checked:y,onChange:e=>{let r=j(t).map(e=>e.id),a=e.target.checked?new Set(r):new Set;h(a),null==l||l(Array.from(a))}})}),(0,a.jsx)(E,{label:"Nome",onClick:()=>x("nome"),active:"nome"===i,dir:c}),(0,a.jsx)(E,{label:"E-mail",onClick:()=>x("email"),active:"email"===i,dir:c}),(0,a.jsx)(E,{label:"N\xedvel",onClick:()=>x("role"),active:"role"===i,dir:c}),(0,a.jsx)("th",{className:"px-3 py-2",children:"Status Online"}),(0,a.jsx)(E,{label:"Status",onClick:()=>x("ativo"),active:"ativo"===i,dir:c}),(0,a.jsx)(E,{label:"Criado",onClick:()=>x("criadoEm"),active:"criadoEm"===i,dir:c}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"A\xe7\xf5es"})]})}),(0,a.jsxs)("tbody",{children:[p.map(e=>{var t,s;let i=u.has(e.id);return(0,a.jsxs)("tr",{className:"border-t border-black/5 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/10",children:[(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsx)("input",{"aria-label":"Selecionar ".concat(e.nomeCompleto),type:"checkbox",checked:i,onChange:t=>{let r=new Set(u);t.target.checked?r.add(e.id):r.delete(e.id),h(r),null==l||l(Array.from(r))}})}),(0,a.jsx)("td",{className:"px-3 py-3 font-medium",children:e.nomeCompleto}),(0,a.jsx)("td",{className:"px-3 py-3",children:e.email}),(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsx)(w,{role:e.role})}),(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(()=>{let t=e.ultimoLoginEm?new Date(e.ultimoLoginEm):null,r=new Date,s=t&&r.getTime()-t.getTime()<9e5;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-green-500":"bg-gray-400"),title:s?"Online":"Offline"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:t?t.toLocaleDateString("pt-BR"):"Nunca"})]})})()})}),(0,a.jsx)("td",{className:"px-3 py-3",children:(()=>{var t;let r=null!=(t=e.ativo)?t:"ATIVO"===e.status;return(0,a.jsx)("span",{className:"rounded-full px-2 py-1 text-xs ".concat(r?"bg-emerald-500/15 text-emerald-600 dark:bg-emerald-500/20":"bg-neutral-500/15 text-neutral-600 dark:bg-neutral-500/20"),children:r?"Ativo":"Inativo"})})()}),(0,a.jsx)("td",{className:"px-3 py-3 text-xs opacity-70",children:e.criadoEm?new Date(e.criadoEm).toLocaleDateString("pt-BR"):"-"}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsxs)("button",{onClick:()=>r(e.id),className:"rounded-lg px-2 py-1 text-xs hover:bg-black/5 dark:hover:bg-white/10",children:[(0,a.jsx)(g.A,{className:"mr-1 inline h-3.5 w-3.5"})," Editar"]}),(0,a.jsx)("button",{onClick:()=>{var t;return n(e.id,null!=(t=e.ativo)?t:"ATIVO"===e.status)},className:"rounded-lg px-2 py-1 text-xs hover:bg-opacity-20 ".concat((null!=(t=e.ativo)?t:"ATIVO"===e.status)?"text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"),children:(null!=(s=e.ativo)?s:"ATIVO"===e.status)?"⏸️ Desativar":"▶️ Ativar"}),(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"rounded-lg px-2 py-1 text-xs text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:[(0,a.jsx)(b.A,{className:"mr-1 inline h-3.5 w-3.5"})," Excluir"]}),(0,a.jsx)("button",{className:"rounded-lg p-1 hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Mais a\xe7\xf5es",children:(0,a.jsx)(v,{className:"h-4 w-4"})})]})})]},e.id)}),0===p.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-3 py-8 text-center opacity-60",children:"Nenhum usu\xe1rio encontrado."})})]})]}),u.size>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 border-t border-black/10 p-3 text-xs dark:border-white/10",children:[(0,a.jsxs)("div",{children:[u.size," selecionado(s)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{Array.from(u).forEach(e=>{var t;let r=m.find(t=>t.id===e);r&&!(null!=(t=r.ativo)?t:"ATIVO"===r.status)&&n(e,!1)}),h(new Set)},className:"rounded-lg px-2 py-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20",children:"▶️ Ativar Selecionados"}),(0,a.jsx)("button",{onClick:()=>{Array.from(u).forEach(e=>{var t;let r=m.find(t=>t.id===e);r&&(null!=(t=r.ativo)?t:"ATIVO"===r.status)&&n(e,!0)}),h(new Set)},className:"rounded-lg px-2 py-1 text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20",children:"⏸️ Desativar Selecionados"}),(0,a.jsx)("button",{onClick:()=>{Array.from(u).forEach(e=>o(e)),h(new Set)},className:"rounded-lg px-2 py-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"\uD83D\uDDD1️ Excluir Selecionados"})]})]})]})}function E(e){let{label:t,onClick:r,active:s,dir:o}=e;return(0,a.jsx)("th",{className:"px-3 py-2","aria-sort":s?"asc"===o?"ascending":"descending":"none",children:(0,a.jsxs)("button",{onClick:r,className:"inline-flex items-center gap-1 rounded px-1 py-0.5 hover:bg-black/5 dark:hover:bg-white/10 ".concat(s?"font-medium":""),children:[t," ",(0,a.jsx)(f.A,{className:"h-3.5 w-3.5 ".concat(s?"opacity-100":"opacity-50")}),(0,a.jsx)("span",{className:"sr-only",children:"asc"===o?"asc":"desc"})]})})}var C=r(30781),S=r(14827),A=r(53171);function T(){let{confirm:e,Dialog:t}=(0,S.S)(),{showToast:r}=(0,m.d)(),[o,l]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,x]=(0,s.useState)(1),[g]=(0,s.useState)(10),[b,v]=(0,s.useState)(0),[f,y]=(0,s.useState)([]),[w,k]=(0,s.useState)(!0),[j,E]=(0,s.useState)("criadoEm"),[T,D]=(0,s.useState)("desc"),[L,O]=(0,s.useState)([]),[R,U]=(0,s.useState)(!1),M=(0,s.useRef)(null),I=(0,s.useCallback)(async()=>{var e;k(!0),null==(e=M.current)||e.abort(),M.current=new AbortController;try{let e=await (0,C.lo)({q:o,role:i,status:d,page:h,pageSize:g,sortKey:j,sortDir:T});y(e.items),v(e.total)}finally{k(!1)}},[o,i,d,h,g,j,T]);async function P(t){if(await e({title:"Remover usu\xe1rio",message:"Tem certeza que deseja remover este usu\xe1rio?",confirmText:"Remover",tone:"danger"}))try{await (0,C.hG)(String(t)),r({title:"Removido",message:"Usu\xe1rio removido com sucesso",type:"success"}),I()}catch(e){console.error("Erro ao remover usu\xe1rio"),r({title:"Erro",message:"Falha ao remover usu\xe1rio",type:"error"})}}async function F(t,a){let s=a?"desativar":"ativar";if(await e({title:"".concat(s.charAt(0).toUpperCase()+s.slice(1)," usu\xe1rio"),message:"Tem certeza que deseja ".concat(s," este usu\xe1rio?"),confirmText:s.charAt(0).toUpperCase()+s.slice(1),tone:a?"danger":"default"}))try{await (0,C.g9)(String(t),!a),r({title:"Sucesso",message:"Status atualizado",type:"success"}),I()}catch(e){console.error("Erro ao alterar status do usu\xe1rio"),r({title:"Erro",message:"Erro ao alterar status do usu\xe1rio",type:"error"})}}(0,s.useEffect)(()=>{I()},[I]);let z=(0,s.useMemo)(()=>Math.max(1,Math.ceil(b/g)),[b,g]);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-title text-xl",children:"Usu\xe1rios"}),(0,a.jsx)(n(),{href:"/usuarios/novo",className:"rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white hover:brightness-110",children:"Novo Usu\xe1rio"})]}),(0,a.jsx)(p,{q:o,onQ:l,role:i,onRole:c,status:d,onStatus:u,total:b,showNew:!1,users:f.filter(e=>L.includes(e.id)),scope:"selected",exporting:R,onExportAllFiltered:async e=>{try{if(U(!0),"csv"===e){let e=await fetch("/api/usuarios/export/csv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filters:{q:o,role:i,status:d,sortKey:j,sortDir:T}})});if(!e.ok)throw Error("Falha ao exportar CSV");let t=await e.blob(),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="usuarios.csv",a.click(),window.URL.revokeObjectURL(r)}else{let e=await fetch("/api/usuarios/export/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filters:{q:o,role:i,status:d,sortKey:j,sortDir:T}})});if(!e.ok)throw Error("Falha ao exportar PDF");let t=await e.blob(),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="usuarios.pdf",a.click(),window.URL.revokeObjectURL(r)}}finally{U(!1)}}}),(0,a.jsx)(A.Panel,{title:"Lista de Usu\xe1rios",children:w?(0,a.jsx)("div",{className:"p-6 text-sm opacity-60",children:"Carregando…"}):(0,a.jsx)(N,{data:f,onEdit:e=>location.href="/usuarios/".concat(e),onDelete:P,onToggleStatus:F,onSelectedChange:O,sortKey:j,sortDir:T,onSortChange:(e,t)=>{E(e),D(t)}})}),(0,a.jsx)(t,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"opacity-60",children:["P\xe1gina ",h," de ",z]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{disabled:h<=1,onClick:()=>x(e=>Math.max(1,e-1)),className:"rounded-lg border px-3 py-1 disabled:opacity-50",children:"Anterior"}),(0,a.jsx)("button",{disabled:h>=z,onClick:()=>x(e=>Math.min(z,e+1)),className:"rounded-lg border px-3 py-1 disabled:opacity-50",children:"Pr\xf3xima"})]})]})]})}},62525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},64198:(e,t,r)=>{"use strict";r.d(t,{ToastContainer:()=>i,ToastProvider:()=>n,d:()=>l});var a=r(95155),s=r(12115);let o=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,s.useState)([]),l=(0,s.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),i=(0,s.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),r={...e,id:t};n(e=>[...e,r]);let a=e.duration||5e3;a>0&&setTimeout(()=>{l(t)},a)},[l]),c=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"success"})},[i]),d=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"error",duration:0})},[i]),u=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"warning"})},[i]),h=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"info"})},[i]);return(0,a.jsx)(o.Provider,{value:{toasts:r,addToast:i,removeToast:l,success:c,error:d,warning:u,info:h},children:t})}function l(){let e=(0,s.useContext)(o);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function i(){let{toasts:e,removeToast:t}=l();return 0===e.length?null:(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:e.map(e=>(0,a.jsx)(c,{toast:e,onRemove:t},e.id))})}function c(e){let{toast:t,onRemove:r}=e,{type:s,title:o,message:n,action:l}=t;return(0,a.jsx)("div",{className:"".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()," border rounded-lg shadow-lg p-4 transform transition-all duration-300 ease-in-out animate-in slide-in-from-right"),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(s){case"success":return(0,a.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return(0,a.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.936-.833-2.707 0L3.108 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"info":return(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})()}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:o}),n&&(0,a.jsx)("p",{className:"mt-1 text-sm opacity-90",children:n}),l&&(0,a.jsx)("button",{onClick:l.onClick,className:"mt-2 text-sm font-medium underline hover:no-underline",children:l.label})]}),(0,a.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,a.jsx)("button",{onClick:()=>r(t.id),className:"inline-flex rounded-md p-1.5 hover:bg-black hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent focus:ring-current",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})})}},66474:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},82165:(e,t,r)=>{Promise.resolve().then(r.bind(r,30971))},89917:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},91788:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[6766,6874,2186,3171,8441,1684,7358],()=>t(82165)),_N_E=e.O()}]);