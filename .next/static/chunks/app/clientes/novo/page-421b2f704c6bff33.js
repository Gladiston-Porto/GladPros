(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7085],{49705:(e,i,s)=>{"use strict";s.d(i,{default:()=>c});var o=s(95155),t=s(12115),l=s(35695),a=s(35050),n=s(53171),r=s(16447);function c(){let e=(0,l.useRouter)(),{showToast:i}=(0,r.d)(),[s,c]=(0,t.useState)(!1),d=async s=>{c(!0);try{let o=await fetch("/api/clientes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let e=await o.json();if(null==e?void 0:e.details)throw{message:e.error||e.message||"Dados inv\xe1lidos",details:e.details};let i=(null==e?void 0:e.error)||(null==e?void 0:e.message)||"",t={};if(/e-mail.*cadastrado|E-mail.*cadastrado/i.test(i)&&(t.email=i),/Documento.*cadastrado/i.test(i)&&((null==s?void 0:s.tipo)==="PJ"&&(null==s?void 0:s.ein)&&(t.ein=i),(null==s?void 0:s.tipo)==="PF"&&((null==s?void 0:s.tipoDocumentoPF)==="SSN"&&(null==s?void 0:s.ssn)&&(t.ssn=i),(null==s?void 0:s.tipoDocumentoPF)==="ITIN"&&(null==s?void 0:s.itin)&&(t.itin=i))),Object.keys(t).length)throw{message:i||"Dados inv\xe1lidos",fieldErrors:t};throw Error(i||"Erro ao criar cliente")}i({title:"Sucesso",message:"Cliente criado com sucesso",type:"success"}),e.push("/clientes")}catch(e){if(console.error("Erro ao criar cliente:",e),null==e?void 0:e.details)throw e;i({title:"Erro",message:e.message||"Erro ao criar cliente",type:"error"})}finally{c(!1)}};return(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsx)(n.Panel,{title:"Novo Cliente",children:(0,o.jsx)(a.D,{onSubmit:d,onCancel:()=>{e.push("/clientes")},loading:s})})})}},88591:(e,i,s)=>{Promise.resolve().then(s.bind(s,49705))}},e=>{var i=i=>e(e.s=i);e.O(0,[6766,6874,2186,3171,5568,8441,1684,7358],()=>i(88591)),_N_E=e.O()}]);