(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4372],{16447:(e,t,a)=>{"use strict";a.d(t,{d:()=>s}),a(95155),a(12115);var r=a(64198);function s(){let e=(0,r.d)();return{showToast:t=>{let{title:a,message:r,type:s="info",duration:o}=t;if("number"==typeof o)return void e.addToast({title:null!=a?a:"",message:r,type:s,duration:o});switch(s){case"success":e.success(null!=a?a:"Sucesso",r);break;case"error":e.error(null!=a?a:"Erro",r);break;case"warning":e.warning(null!=a?a:"Aviso",r);break;default:e.info(null!=a?a:"",r)}}}}},21492:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},59303:(e,t,a)=>{Promise.resolve().then(a.bind(a,60898))},60898:(e,t,a)=>{"use strict";a.d(t,{default:()=>A});var r=a(95155),s=a(12115),o=a(6874),l=a.n(o);function n(e){let{currentPage:t,totalPages:a,pageSize:o,total:l,onPageChange:n,onPageSizeChange:i}=e,c=Math.min(t*o,l);return a<=1?null:(0,r.jsx)("div",{className:"bg-white px-4 py-3 border border-gray-200 rounded-lg shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,r.jsx)("button",{onClick:()=>n(t-1),disabled:1===t,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),(0,r.jsx)("button",{onClick:()=>n(t+1),disabled:t===a,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xf3ximo"})]}),(0,r.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Mostrando"," ",(0,r.jsx)("span",{className:"font-medium",children:(t-1)*o+1})," ","a"," ",(0,r.jsx)("span",{className:"font-medium",children:c})," ","de"," ",(0,r.jsx)("span",{className:"font-medium",children:l})," ","resultado",1!==l?"s":""]}),i&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{htmlFor:"pageSize",className:"text-sm text-gray-700",children:"Por p\xe1gina:"}),(0,r.jsxs)("select",{id:"pageSize",className:"border border-gray-300 rounded px-2 py-1 text-sm",value:o,onChange:e=>i(Number(e.target.value)),children:[(0,r.jsx)("option",{value:5,children:"5"}),(0,r.jsx)("option",{value:12,children:"12"}),(0,r.jsx)("option",{value:25,children:"25"}),(0,r.jsx)("option",{value:50,children:"50"})]})]})]}),(0,r.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,r.jsxs)("button",{onClick:()=>n(t-1),disabled:1===t,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)("span",{className:"sr-only",children:"P\xe1gina anterior"}),(0,r.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),(()=>{let e=[];if(a<=7)for(let t=1;t<=a;t++)e.push(t);else if(t<=4){for(let t=1;t<=5;t++)e.push(t);e.push("..."),e.push(a)}else if(t>=a-3){e.push(1),e.push("...");for(let t=a-4;t<=a;t++)e.push(t)}else{e.push(1),e.push("...");for(let a=t-1;a<=t+1;a++)e.push(a);e.push("..."),e.push(a)}return e})().map((e,a)=>(0,r.jsx)(s.Fragment,{children:"..."===e?(0,r.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}):(0,r.jsx)("button",{onClick:()=>n(e),className:"\n                      relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors\n                      ".concat(t===e?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","\n                    "),children:e})},a)),(0,r.jsxs)("button",{onClick:()=>n(t+1),disabled:t===a,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)("span",{className:"sr-only",children:"Pr\xf3xima p\xe1gina"}),(0,r.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})]})]})})}var i=a(47924);let c=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var d=a(91788),u=a(66474);let x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"clientes",a=new Blob([["ID,Nome/Empresa,Tipo,E-mail,Telefone,Cidade,Estado,Status,Criado Em",...e.map(e=>[e.id,e.nomeCompletoOuRazao||"",e.tipo||"",e.email||"",e.telefone||"",e.cidade||"",e.estado||"",e.ativo?"Ativo":"Inativo",e.criadoEm?new Date(e.criadoEm).toLocaleDateString("pt-BR"):""]).map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download="".concat(t,".csv"),document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)},h=async e=>{let t=await fetch("/api/clientes/export/csv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw(null==e?void 0:e.message)?Error(e.message):Error("Falha ao gerar CSV")}let a=await t.blob(),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download="".concat(e.filename||"clientes",".csv"),s.click(),URL.revokeObjectURL(r)},m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"clientes";try{let a=await fetch("/api/clientes/export/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientes:e,filename:t})});if(!a.ok){let e=await a.json().catch(()=>({}));throw(null==e?void 0:e.message)?Error(e.message):Error("Falha ao gerar PDF")}let r=await a.blob(),s=window.URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="".concat(t,".pdf"),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(s)}catch(e){throw e}};async function p(e){let t=await fetch("/api/clientes/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Falha na a\xe7\xe3o em lote")}return t.json()}var g=a(16447);function b(e){let{q:t,onQ:a,tipo:o,onTipo:n,status:p,onStatus:b,total:f,showNew:y=!0,clientes:v,scope:j="allFiltered",selectedCount:k=0,onScopeChange:w,loading:N=!1}=e,[C,S]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),T=(0,s.useRef)(null),[L,D]=(0,s.useState)(!1),[O,z]=(0,s.useState)(!1),[R,P]=(0,s.useState)(!1),M=(0,s.useRef)(null),F=(0,s.useRef)(null),I=(0,s.useRef)(null),{showToast:U}=(0,g.d)(),V=async e=>{S(!1),A(!0);let a=j||"allFiltered",r="selected"===a?k||0:f;if(0===r)return void U({title:"Aviso",message:"Nenhum cliente para exportar",type:"info"});if(!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return e>t}(r)||window.confirm("Voc\xea est\xe1 prestes a exportar ".concat(r," registros. Isso pode demorar. Deseja continuar?")))try{"csv"===e?("selected"===a?x(v):await h({filename:"clientes",filters:{q:t,tipo:""===o?"all":o,ativo:"ATIVO"===p||"INATIVO"!==p&&"all"}}),U({title:"Exportado",message:"CSV gerado com sucesso",type:"success"})):("selected"===a?await m(v):await fetch("/api/clientes/export/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:"clientes",filters:{q:t,tipo:""===o?"all":o,ativo:"ATIVO"===p||"INATIVO"!==p&&"all"}})}).then(async e=>{if(!e.ok)throw Error("Falha ao exportar PDF");let t=await e.blob(),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="clientes.pdf",r.click(),URL.revokeObjectURL(a)}),U({title:"Exportado",message:"PDF gerado com sucesso",type:"success"}))}catch(t){console.error("Erro na exporta\xe7\xe3o"),U({title:"Erro",message:"Erro ao exportar ".concat(e.toUpperCase()),type:"error"})}finally{A(!1)}};return(0,s.useEffect)(()=>{let e=e=>{T.current&&!T.current.contains(e.target)&&S(!1),M.current&&!M.current.contains(e.target)&&D(!1),F.current&&!F.current.contains(e.target)&&z(!1),I.current&&!I.current.contains(e.target)&&P(!1)};if(C||L||O||R)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[C,L,O,R]),(0,r.jsxs)("div",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-400"}),(0,r.jsx)("input",{value:t,onChange:e=>a(e.target.value),placeholder:"Buscar por nome ou e-mail",className:"w-[260px] rounded-xl border border-black/10 bg-white px-9 py-2 text-sm outline-none placeholder:text-neutral-400 focus:border-[#0098DA] dark:border-white/10 dark:bg-white/5 text-foreground"})]}),(0,r.jsxs)("div",{className:"relative","data-slot":"tipo-menu",ref:M,children:[(0,r.jsxs)("button",{onClick:()=>D(e=>!e),className:"rounded-xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 text-foreground","aria-haspopup":"menu","aria-expanded":L,children:[""===o?"Todos os Tipos":o,(0,r.jsx)("span",{className:"ml-2",children:"▾"})]}),L&&(0,r.jsxs)("div",{className:"absolute left-0 top-full mt-1 w-44 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-20",children:[(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{n(""),D(!1)},children:"Todos os Tipos"}),(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{n("PF"),D(!1)},children:"Pessoa F\xedsica"}),(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{n("PJ"),D(!1)},children:"Pessoa Jur\xeddica"})]})]}),(0,r.jsxs)("div",{className:"relative","data-slot":"status-menu",ref:F,children:[(0,r.jsxs)("button",{onClick:()=>z(e=>!e),className:"rounded-xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 text-foreground","aria-haspopup":"menu","aria-expanded":O,children:[""===p?"Todos":"ATIVO"===p?"Status":"Inativos",(0,r.jsx)("span",{className:"ml-2",children:"▾"})]}),O&&(0,r.jsxs)("div",{className:"absolute left-0 top-full mt-1 w-40 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-20",children:[(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{b(""),z(!1)},children:"Todos"}),(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{b("ATIVO"),z(!1)},children:"Ativos"}),(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{b("INATIVO"),z(!1)},children:"Inativos"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[w&&(0,r.jsxs)("div",{className:"relative",ref:I,children:[(0,r.jsxs)("button",{onClick:()=>P(e=>!e),className:"rounded-2xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 text-foreground","aria-haspopup":"menu","aria-expanded":R,children:["Selecionados",(0,r.jsx)("span",{className:"ml-2",children:"▾"})]}),R&&(0,r.jsxs)("div",{className:"absolute left-0 top-full mt-1 w-44 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-20",children:[(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{w("selected"),P(!1)},children:"Selecionados"}),(0,r.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{w("allFiltered"),P(!1)},children:"Todos os filtrados"})]})]}),(0,r.jsxs)("div",{className:"relative",ref:T,children:[(0,r.jsxs)("button",{onClick:()=>!E&&S(!C),className:"rounded-2xl border border-black/10 bg-white px-3 py-2 text-sm hover:bg-black/5 dark:border-white/10 dark:bg-white/5 flex items-center gap-1 disabled:opacity-50",disabled:N||E,"aria-busy":E,children:[E?(0,r.jsx)(c,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(d.A,{className:"h-4 w-4"}),E?"Exportando":"Exportar",!E&&(0,r.jsx)(u.A,{className:"h-3 w-3"})]}),C&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-10",children:[(0,r.jsxs)("button",{onClick:()=>V("csv"),className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDCCA"}),(0,r.jsx)("span",{children:"Exportar CSV"})]}),(0,r.jsxs)("button",{onClick:()=>V("pdf"),className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC4"}),(0,r.jsx)("span",{children:"Exportar PDF"})]})]})]}),y&&(0,r.jsx)(l(),{href:"/clientes/novo",className:"rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white hover:brightness-110 inline-flex items-center gap-1",children:"Novo Cliente"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[N&&(0,r.jsx)("div",{className:"text-xs opacity-70",children:"Carregando…"}),(0,r.jsxs)("div",{className:"text-xs opacity-60",children:[f.toLocaleString("pt-BR")," resultado(s)"]})]})]})}var f=a(89917),y=a(62525),v=a(21492);function j(e){let{data:t,onEdit:a,onDelete:o,onToggleStatus:l,sortKey:n,sortDir:i,onSortChange:c,onSelectedChange:d}=e,u=(0,s.useMemo)(()=>null!=t?t:[],[t]),[x,h]=(0,s.useState)(new Set),m=x.size>0&&x.size===u.length;return 0===u.length?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("div",{className:"text-gray-400 text-sm",children:"Nenhum cliente encontrado"})}):(0,r.jsxs)("div",{className:"overflow-x-auto rounded-2xl border border-black/10 bg-white dark:border-white/10 dark:bg-white/5",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left opacity-70",children:[(0,r.jsx)("th",{className:"px-3 py-2",children:(0,r.jsx)("input",{"aria-label":"Selecionar todos",type:"checkbox",checked:m,onChange:e=>{let t=u.map(e=>e.id),a=e.target.checked?new Set(t):new Set;h(a),null==d||d(Array.from(a))}})}),(0,r.jsx)(k,{label:"Nome/Raz\xe3o Social",onClick:()=>c("nome","nome"===n&&"asc"===i?"desc":"asc"),active:"nome"===n,dir:i,ariaSort:"nome"===n?"asc"===i?"ascending":"descending":"none"}),(0,r.jsx)(k,{label:"Tipo",onClick:()=>c("tipo","tipo"===n&&"asc"===i?"desc":"asc"),active:"tipo"===n,dir:i,ariaSort:"tipo"===n?"asc"===i?"ascending":"descending":"none"}),(0,r.jsx)(k,{label:"E-mail",onClick:()=>c("email","email"===n&&"asc"===i?"desc":"asc"),active:"email"===n,dir:i,ariaSort:"email"===n?"asc"===i?"ascending":"descending":"none"}),(0,r.jsx)(k,{label:"Telefone",onClick:()=>c("telefone","telefone"===n&&"asc"===i?"desc":"asc"),active:"telefone"===n,dir:i,ariaSort:"telefone"===n?"asc"===i?"ascending":"descending":"none"}),(0,r.jsx)(k,{label:"Documento",onClick:()=>c("documento","documento"===n&&"asc"===i?"desc":"asc"),active:"documento"===n,dir:i,ariaSort:"documento"===n?"asc"===i?"ascending":"descending":"none"}),(0,r.jsx)(k,{label:"Cidade/Estado",onClick:()=>c("cidadeEstado","cidadeEstado"===n&&"asc"===i?"desc":"asc"),active:"cidadeEstado"===n,dir:i,ariaSort:"cidadeEstado"===n?"asc"===i?"ascending":"descending":"none"}),(0,r.jsx)(k,{label:"Status",onClick:()=>c("status","status"===n&&"asc"===i?"desc":"asc"),active:"status"===n,dir:i,ariaSort:"status"===n?"asc"===i?"ascending":"descending":"none"}),(0,r.jsx)("th",{className:"px-3 py-2 text-right",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:u.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t border-black/5 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/10 ".concat(""),children:[(0,r.jsx)("td",{className:"px-3 py-3",children:(0,r.jsx)("input",{"aria-label":"Selecionar ".concat(e.nomeCompletoOuRazao),type:"checkbox",checked:x.has(e.id),onChange:t=>{let a=new Set(x);t.target.checked?a.add(e.id):a.delete(e.id),h(a),null==d||d(Array.from(a))}})}),(0,r.jsx)("td",{className:"px-3 py-3 font-medium",children:(0,r.jsx)("div",{className:"font-medium text-foreground dark:text-white",children:e.nomeCompletoOuRazao})}),(0,r.jsx)("td",{className:"px-3 py-3",children:(0,r.jsx)("span",{className:"inline-flex rounded-full px-2 py-1 text-xs font-medium ".concat("PF"===e.tipo?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300":"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300"),children:e.tipo})}),(0,r.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.email}),(0,r.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.telefone}),(0,r.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.documentoMasked}),(0,r.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.cidade&&e.estado?"".concat(e.cidade,", ").concat(e.estado):e.cidade||e.estado||"-"}),(0,r.jsx)("td",{className:"px-3 py-3",children:(0,r.jsx)("span",{className:"inline-flex rounded-full px-2 py-1 text-xs font-medium ".concat(e.ativo?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"),children:e.ativo?"Ativo":"Inativo"})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsxs)("button",{onClick:()=>a(e.id),className:"rounded-lg px-2 py-1 text-xs hover:bg-black/5 dark:hover:bg-white/10",children:[(0,r.jsx)(f.A,{className:"mr-1 inline h-3.5 w-3.5"})," Editar"]}),(0,r.jsx)("button",{onClick:()=>l(e.id,e.ativo),className:"rounded-lg px-2 py-1 text-xs hover:bg-opacity-20 ".concat(e.ativo?"text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"),children:e.ativo?"⏸️ Desativar":"▶️ Ativar"}),(0,r.jsxs)("button",{onClick:()=>o(e.id),className:"rounded-lg px-2 py-1 text-xs text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:[(0,r.jsx)(y.A,{className:"mr-1 inline h-3.5 w-3.5"})," Excluir"]})]})})]},e.id))})]}),x.size>0&&(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 border-t border-black/10 p-3 text-xs dark:border-white/10",children:[(0,r.jsxs)("div",{children:[x.size," selecionado(s)"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{Array.from(x).forEach(e=>{let t=u.find(t=>t.id===e);t&&!t.ativo&&l(e,!1)}),h(new Set),null==d||d([])},className:"rounded-lg px-2 py-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20",children:"▶️ Ativar Selecionados"}),(0,r.jsx)("button",{onClick:()=>{Array.from(x).forEach(e=>{let t=u.find(t=>t.id===e);t&&t.ativo&&l(e,!0)}),h(new Set),null==d||d([])},className:"rounded-lg px-2 py-1 text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20",children:"⏸️ Desativar Selecionados"}),(0,r.jsx)("button",{onClick:()=>{Array.from(x).forEach(e=>o(e)),h(new Set),null==d||d([])},className:"rounded-lg px-2 py-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"\uD83D\uDDD1️ Excluir Selecionados"})]})]})]})}function k(e){let{label:t,onClick:a,active:s,dir:o,ariaSort:l="none"}=e;return(0,r.jsx)("th",{className:"px-3 py-2","aria-sort":l,children:(0,r.jsxs)("button",{onClick:a,"aria-label":"Ordenar por ".concat(t),className:"inline-flex items-center gap-1 rounded px-1 py-0.5 hover:bg-black/5 dark:hover:bg-white/10 ".concat(s?"font-medium":""),children:[t," ",(0,r.jsx)(v.A,{className:"h-3.5 w-3.5 ".concat(s?"opacity-100":"opacity-50")}),(0,r.jsx)("span",{className:"sr-only",children:"asc"===o?"asc":"desc"})]})})}async function w(e,t){let a=new URLSearchParams;e.q&&a.append("q",e.q),e.tipo&&"all"!==e.tipo&&a.append("tipo",e.tipo),"all"!==e.ativo&&a.append("ativo",String(e.ativo)),e.page&&a.append("page",String(e.page)),e.pageSize&&a.append("pageSize",String(e.pageSize)),e.sortKey&&a.append("sortKey",e.sortKey),e.sortDir&&a.append("sortDir",e.sortDir);let r=await fetch("/api/clientes?".concat(a.toString()),{signal:t});if(!r.ok)throw Error("Erro ao carregar clientes");return r.json()}async function N(e){if(!(await fetch("/api/clientes/".concat(e),{method:"DELETE"})).ok)throw Error("Erro ao remover cliente")}async function C(e,t){if(!(await fetch("/api/clientes/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ativo:t})})).ok)throw Error("Erro ao alterar status do cliente")}var S=a(14827),E=a(53171);function A(){let{confirm:e,Dialog:t}=(0,S.S)(),{showToast:a}=(0,g.d)(),[o,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,x]=(0,s.useState)("ATIVO"),[h,m]=(0,s.useState)(1),[f,y]=(0,s.useState)(10),[v,k]=(0,s.useState)(0),[A,T]=(0,s.useState)([]),[L,D]=(0,s.useState)(!0),[O,z]=(0,s.useState)([]),[R,P]=(0,s.useState)("allFiltered"),[M,F]=(0,s.useState)("nome"),[I,U]=(0,s.useState)("asc"),[V,B]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=setTimeout(()=>i(V),350);return()=>clearTimeout(e)},[V]);let q=(0,s.useCallback)(async e=>{D(!0);try{let t=await w({q:o,tipo:c,ativo:"ATIVO"===u||"INATIVO"!==u&&"all",page:h,pageSize:f,sortKey:M,sortDir:I},e);T(t.data),k(t.total)}catch(e){console.error("Erro ao carregar clientes:",e)}finally{D(!1)}},[o,c,u,h,f,M,I]);async function J(t){if(await e({title:"Excluir cliente",message:"Tem certeza que deseja excluir este cliente?",confirmText:"Excluir",tone:"danger"}))try{await N(String(t)),a({title:"Exclu\xeddo",message:"Cliente exclu\xeddo com sucesso",type:"success"}),q()}catch(e){console.error(e),a({title:"Erro",message:"Falha ao excluir cliente",type:"error"})}}async function _(t,r){let s=r?"desativar":"ativar";if(await e({title:"".concat(s.charAt(0).toUpperCase()+s.slice(1)," cliente"),message:"Tem certeza que deseja ".concat(s," este cliente?"),confirmText:s.charAt(0).toUpperCase()+s.slice(1),tone:r?"danger":"default"}))try{await C(String(t),!r),a({title:"Sucesso",message:"Status atualizado",type:"success"}),q()}catch(e){console.error(e),a({title:"Erro",message:"Erro ao alterar status do cliente",type:"error"})}}(0,s.useEffect)(()=>{let e=new AbortController;return q(e.signal),()=>e.abort()},[q]);let W=(0,s.useMemo)(()=>Math.max(1,Math.ceil(v/f)),[v,f]);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"font-title text-xl",children:"Clientes"}),(0,r.jsx)(l(),{href:"/clientes/novo",className:"rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white hover:brightness-110",children:"Novo Cliente"})]}),(0,r.jsx)(b,{q:V,onQ:B,tipo:c,onTipo:d,status:u,onStatus:x,total:v,showNew:!1,clientes:A,scope:R,selectedCount:O.length,onScopeChange:e=>P(e),loading:L}),(0,r.jsx)(E.Panel,{title:"Lista de Clientes",children:L?(0,r.jsx)("div",{className:"p-6 text-sm opacity-60",children:"Carregando…"}):(0,r.jsx)(j,{data:A,onEdit:e=>location.href="/clientes/".concat(e),onDelete:J,onToggleStatus:_,sortKey:M,sortDir:I,onSortChange:(e,t)=>{F(e),U(t),m(1)},onSelectedChange:z})}),(0,r.jsx)(t,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"opacity-60",children:["P\xe1gina ",h," de ",W]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[O.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:async()=>{if(await e({title:"Ativar selecionados",message:"Ativar ".concat(O.length," cliente(s)?"),confirmText:"Ativar"}))try{await p({action:"activate",scope:"selected",ids:O}),a({title:"Sucesso",message:"Clientes ativados",type:"success"}),z([]),q()}catch(e){a({title:"Erro",message:"Falha ao ativar selecionados",type:"error"})}},className:"rounded-lg border px-3 py-1",children:"Ativar Selecionados"}),(0,r.jsx)("button",{onClick:async()=>{if(await e({title:"Desativar selecionados",message:"Desativar ".concat(O.length," cliente(s)?"),confirmText:"Desativar",tone:"danger"}))try{await p({action:"deactivate",scope:"selected",ids:O}),a({title:"Sucesso",message:"Clientes desativados",type:"success"}),z([]),q()}catch(e){a({title:"Erro",message:"Falha ao desativar selecionados",type:"error"})}},className:"rounded-lg border px-3 py-1",children:"Desativar Selecionados"}),(0,r.jsx)("button",{onClick:async()=>{if(await e({title:"Excluir selecionados",message:"Excluir ".concat(O.length," cliente(s)? Essa a\xe7\xe3o n\xe3o pode ser desfeita."),confirmText:"Excluir",tone:"danger"}))try{await p({action:"delete",scope:"selected",ids:O}),a({title:"Sucesso",message:"Clientes exclu\xeddos",type:"success"}),z([]),q()}catch(e){a({title:"Erro",message:"Falha ao excluir selecionados",type:"error"})}},className:"rounded-lg border px-3 py-1 text-red-600",children:"Excluir Selecionados"})]}),(0,r.jsx)("button",{disabled:h<=1,onClick:()=>m(e=>Math.max(1,e-1)),className:"rounded-lg border px-3 py-1 disabled:opacity-50",children:"Anterior"}),(0,r.jsx)("button",{disabled:h>=W,onClick:()=>m(e=>Math.min(W,e+1)),className:"rounded-lg border px-3 py-1 disabled:opacity-50",children:"Pr\xf3ximo"})]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n,{currentPage:h,totalPages:W,pageSize:f,total:v,onPageChange:e=>m(e),onPageSizeChange:e=>{y(e),m(1)}})})]})}},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},64198:(e,t,a)=>{"use strict";a.d(t,{ToastContainer:()=>i,ToastProvider:()=>l,d:()=>n});var r=a(95155),s=a(12115);let o=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)([]),n=(0,s.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),i=(0,s.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),a={...e,id:t};l(e=>[...e,a]);let r=e.duration||5e3;r>0&&setTimeout(()=>{n(t)},r)},[n]),c=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"success"})},[i]),d=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"error",duration:0})},[i]),u=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"warning"})},[i]),x=(0,s.useCallback)((e,t)=>{i({title:e,message:t,type:"info"})},[i]);return(0,r.jsx)(o.Provider,{value:{toasts:a,addToast:i,removeToast:n,success:c,error:d,warning:u,info:x},children:t})}function n(){let e=(0,s.useContext)(o);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function i(){let{toasts:e,removeToast:t}=n();return 0===e.length?null:(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:e.map(e=>(0,r.jsx)(c,{toast:e,onRemove:t},e.id))})}function c(e){let{toast:t,onRemove:a}=e,{type:s,title:o,message:l,action:n}=t;return(0,r.jsx)("div",{className:"".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()," border rounded-lg shadow-lg p-4 transform transition-all duration-300 ease-in-out animate-in slide-in-from-right"),children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(s){case"success":return(0,r.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return(0,r.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return(0,r.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.936-.833-2.707 0L3.108 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"info":return(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})()}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("h3",{className:"font-medium text-sm",children:o}),l&&(0,r.jsx)("p",{className:"mt-1 text-sm opacity-90",children:l}),n&&(0,r.jsx)("button",{onClick:n.onClick,className:"mt-2 text-sm font-medium underline hover:no-underline",children:n.label})]}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,r.jsx)("button",{onClick:()=>a(t.id),className:"inline-flex rounded-md p-1.5 hover:bg-black hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent focus:ring-current",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})})}},66474:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},89917:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},91788:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[6766,6874,2186,3171,8441,1684,7358],()=>t(59303)),_N_E=e.O()}]);