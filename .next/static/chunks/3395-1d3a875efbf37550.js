"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3395],{10491:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(95155),n=a(12115);let s=["ADMIN","GERENTE","USUARIO","FINANCEIRO","ESTOQUE","CLIENTE"];function r(e){var t,a,r,o,c,i,d,u,m,p,x;let{initial:h,onCancel:b,onSubmit:f,submitting:g}=e,[v,N]=(0,n.useState)({ativo:!0,role:"USUARIO",status:"ATIVO",...h}),[j,w]=(0,n.useState)({});function k(e,t){N(a=>({...a,[e]:t})),j[e]&&w(t=>{let a={...t};return delete a[e],a})}function y(e){if(!e)return"";let t=e.replace(/\D/g,"").slice(0,10),a=t.slice(0,3),l=t.slice(3,6),n=t.slice(6,10);return n?"(".concat(a,")").concat(l,"-").concat(n):l?"(".concat(a,")").concat(l):a?"(".concat(a):""}function C(e){if(!e)return"";let t=e.replace(/\D/g,"").slice(0,8),a=t.slice(0,2),l=t.slice(2,4),n=t.slice(4,8);return n?"".concat(a,"/").concat(l,"/").concat(n):l?"".concat(a,"/").concat(l):a}return(0,n.useEffect)(()=>{N(e=>{var t,a,l;return{ativo:null==(t=e.ativo)||t,role:null!=(a=e.role)?a:"USUARIO",status:null!=(l=e.status)?l:"ATIVO",...h}})},[h]),(0,l.jsxs)("form",{onSubmit:async e=>{var t;e.preventDefault(),w({});try{let e={...v},a=function(e){if(!e)return;let t=e.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!t)return;let[,a,l,n]=t,s=Number(a),r=Number(l),o=Number(n);if(!(s<1)&&!(s>12)&&!(r<1)&&!(r>31))return"".concat(o.toString().padStart(4,"0"),"-").concat(a.padStart(2,"0"),"-").concat(l.padStart(2,"0"))}(String(null!=(t=v.dataNascimento)?t:""));a&&(e.dataNascimento=a),await f(e)}catch(e){(null==e?void 0:e.fields)?w(e.fields):(null==e?void 0:e.message)&&console.error("Erro de API:",e.message)}},className:"max-w-3xl w-full mx-auto space-y-4 rounded-2xl border border-black/10 bg-white p-6 dark:border-white/10 dark:bg-white/5 ".concat(g?"opacity-90 cursor-wait":""),children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("label",{className:"text-sm block",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Nome completo"}),(0,l.jsx)("input",{className:"w-full rounded-xl border px-3 py-2 ".concat(j.nomeCompleto?"border-red-500":""),disabled:!!g,value:null!=(t=v.nomeCompleto)?t:"",onChange:e=>k("nomeCompleto",e.target.value),required:!0}),j.nomeCompleto&&(0,l.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:j.nomeCompleto})]}),(0,l.jsxs)("label",{className:"text-sm block",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"E-mail"}),(0,l.jsx)("input",{type:"email",className:"w-full rounded-xl border px-3 py-2 ".concat(j.email?"border-red-500":""),disabled:!!g,value:null!=(a=v.email)?a:"",onChange:e=>k("email",e.target.value),required:!0}),j.email&&(0,l.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:j.email})]})]}),(0,l.jsxs)("div",{className:"grid gap-3 sm:grid-cols-12 items-center",children:[(0,l.jsxs)("label",{className:"text-sm col-span-4",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Data de anivers\xe1rio"}),(0,l.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"MM/DD/YYYY",className:"w-full h-10 rounded-xl border px-3 py-2 uppercase ".concat(j.dataNascimento?"border-red-500":""),disabled:!!g,value:C(String(null!=(r=v.dataNascimento)?r:"")),onChange:e=>k("dataNascimento",C(e.target.value))}),j.dataNascimento&&(0,l.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:j.dataNascimento})]}),(0,l.jsxs)("label",{className:"text-sm col-span-4",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Telefone"}),(0,l.jsx)("input",{type:"tel",inputMode:"tel",placeholder:"(XXX)XXX-XXXX",className:"w-full h-10 rounded-xl border px-3 py-2 ".concat(j.telefone?"border-red-500":""),disabled:!!g,value:y(String(null!=(o=v.telefone)?o:"")),onChange:e=>k("telefone",e.target.value),onBlur:e=>k("telefone",y(e.target.value)),onInput:e=>{k("telefone",y(String(e.target.value).replace(/\D/g,"")))}}),j.telefone&&(0,l.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:j.telefone})]}),(0,l.jsxs)("div",{className:"text-sm col-span-4 relative",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"N\xedvel"}),(0,l.jsx)("select",{className:"w-full h-10 rounded-xl border px-3 py-2",disabled:!!g,value:null!=(c=v.role)?c:"USUARIO",onChange:e=>k("role",e.target.value),children:s.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsx)("div",{className:"absolute left-0 top-full mt-2",children:(0,l.jsxs)("label",{className:"text-sm inline-flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:!!v.ativo,disabled:!!g,onChange:e=>k("ativo",e.target.checked)}),"Ativo"]})})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("label",{className:"text-sm block",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Endere\xe7o 1"}),(0,l.jsx)("input",{className:"w-full rounded-xl border px-3 py-2",disabled:!!g,value:null!=(i=v.endereco1)?i:"",onChange:e=>k("endereco1",e.target.value)})]}),(0,l.jsxs)("label",{className:"text-sm block",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Endere\xe7o 2"}),(0,l.jsx)("input",{className:"w-full rounded-xl border px-3 py-2",disabled:!!g,value:null!=(d=v.endereco2)?d:"",onChange:e=>k("endereco2",e.target.value)})]})]}),(0,l.jsxs)("div",{className:"grid gap-3 sm:grid-cols-12 items-center",children:[(0,l.jsxs)("label",{className:"text-sm col-span-7",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Cidade"}),(0,l.jsx)("input",{className:"w-full rounded-xl border px-3 py-2 h-10",disabled:!!g,value:null!=(u=v.cidade)?u:"",onChange:e=>k("cidade",e.target.value)})]}),(0,l.jsxs)("label",{className:"text-sm col-span-3",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Estado"}),(0,l.jsx)("input",{className:"w-full rounded-xl border px-3 py-2 h-10 max-w-[140px]",disabled:!!g,value:null!=(m=v.estado)?m:"",onChange:e=>k("estado",e.target.value)})]}),(0,l.jsxs)("label",{className:"text-sm col-span-2",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"CEP"}),(0,l.jsx)("input",{className:"w-full rounded-xl border px-3 py-2 h-10 max-w-[120px] ".concat(j.cep?"border-red-500":""),disabled:!!g,value:null!=(p=v.cep)?p:"",onChange:e=>{k("cep",e.target.value.replace(/\D/g,""))},placeholder:"12345678",maxLength:8}),j.cep&&(0,l.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:j.cep})]})]}),(0,l.jsxs)("label",{className:"text-sm block",children:[(0,l.jsx)("span",{className:"mb-1 block opacity-80",children:"Anota\xe7\xf5es"}),(0,l.jsx)("textarea",{className:"w-full rounded-xl border px-3 py-2",rows:4,disabled:!!g,value:null!=(x=v.anotacoes)?x:"",onChange:e=>k("anotacoes",e.target.value)})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,l.jsxs)("button",{type:"submit",disabled:g,className:"inline-flex items-center gap-2 rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white hover:brightness-110 disabled:opacity-70",children:[g&&(0,l.jsx)("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-white/60 border-t-white","aria-hidden":!0}),(0,l.jsx)("span",{children:g?"Salvandoâ€¦":"Salvar"})]}),b&&(0,l.jsx)("button",{type:"button",onClick:b,className:"rounded-2xl border border-[#0098DA] px-4 py-2 text-sm text-[#0098DA] hover:bg-[#0098DA] hover:text-white",children:"Cancelar"})]})]})}},16447:(e,t,a)=>{a.d(t,{d:()=>n}),a(95155),a(12115);var l=a(64198);function n(){let e=(0,l.d)();return{showToast:t=>{let{title:a,message:l,type:n="info",duration:s}=t;if("number"==typeof s)return void e.addToast({title:null!=a?a:"",message:l,type:n,duration:s});switch(n){case"success":e.success(null!=a?a:"Sucesso",l);break;case"error":e.error(null!=a?a:"Erro",l);break;case"warning":e.warning(null!=a?a:"Aviso",l);break;default:e.info(null!=a?a:"",l)}}}}},30781:(e,t,a)=>{a.d(t,{TK:()=>d,g9:()=>m,hG:()=>u,kg:()=>c,lo:()=>o,wz:()=>i});let l="/api/usuarios";async function n(e){try{return await e.json()}catch(e){return null}}function s(e){let t={};for(let[a,l]of Object.entries(e))null!=l&&("string"!=typeof l||""!==l.trim())&&(t[a]=l);return t}function r(e){if(e){if(e instanceof Date&&!isNaN(e.getTime())){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(l)}return e}}async function o(e){var t,a,s,r;let o=function(e){let t=new URLSearchParams;return e?(Object.entries(e).forEach(e=>{let[a,l]=e;null!=l&&""!==l&&t.set(a,String(l))}),t.toString()):""}(e),c=o?"".concat(l,"?").concat(o):l,i=await fetch(c,{cache:"no-store",credentials:"include"});if(!i.ok){let e=await n(i);throw Error((null==e?void 0:e.error)||(null==e?void 0:e.message)||"HTTP ".concat(i.status))}let d=await i.json();return{items:null!=(t=d.items)?t:[],total:null!=(a=d.total)?a:0,page:null!=(s=d.page)?s:1,pageSize:null!=(r=d.pageSize)?r:20}}async function c(e){var t,a;let o=s({nomeCompleto:e.nomeCompleto,email:e.email,dataNascimento:r(e.dataNascimento),role:null!=(t=e.role)?t:"USUARIO",status:null!=(a=e.status)?a:"ATIVO",telefone:e.telefone,endereco1:e.endereco1,endereco2:e.endereco2,cidade:e.cidade,estado:e.estado,cep:e.cep,anotacoes:e.anotacoes}),c=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)}),i=await n(c);if(!c.ok){if((null==i?void 0:i.error)==="VALIDATION_ERROR"&&(null==i?void 0:i.fields)){let e=Error(i.message||"Erro de valida\xe7\xe3o");throw e.fields=i.fields,e}throw Error((null==i?void 0:i.error)||(null==i?void 0:i.message)||"HTTP ".concat(c.status))}return i}async function i(e){let t=await fetch("".concat(l,"/").concat(e),{cache:"no-store",credentials:"include"});if(!t.ok){let e=await n(t);throw Error((null==e?void 0:e.error)||(null==e?void 0:e.message)||"HTTP ".concat(t.status))}return await t.json()}async function d(e,t){let a=s({nomeCompleto:t.nomeCompleto,email:t.email,dataNascimento:r(t.dataNascimento),role:t.role,status:t.status,telefone:t.telefone,endereco1:t.endereco1,endereco2:t.endereco2,cidade:t.cidade,estado:t.estado,cep:t.cep,anotacoes:t.anotacoes}),o=await fetch("".concat(l,"/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}),c=await n(o);if(!o.ok){if((null==c?void 0:c.error)==="VALIDATION_ERROR"&&(null==c?void 0:c.fields)){let e=Error(c.message||"Erro de valida\xe7\xe3o");throw e.fields=c.fields,e}throw Error((null==c?void 0:c.error)||(null==c?void 0:c.message)||"HTTP ".concat(o.status))}return c}async function u(e){let t=await fetch("".concat(l,"/").concat(e),{method:"DELETE",credentials:"include"}),a=await n(t);if(!t.ok)throw Error((null==a?void 0:a.error)||(null==a?void 0:a.message)||"HTTP ".concat(t.status));return a}async function m(e,t){let a=await fetch("".concat(l,"/").concat(e,"/status"),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({ativo:t})}),s=await n(a);if(!a.ok)throw Error((null==s?void 0:s.error)||(null==s?void 0:s.message)||"HTTP ".concat(a.status));return s}},35695:(e,t,a)=>{var l=a(18999);a.o(l,"useParams")&&a.d(t,{useParams:function(){return l.useParams}}),a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},64198:(e,t,a)=>{a.d(t,{ToastContainer:()=>c,ToastProvider:()=>r,d:()=>o});var l=a(95155),n=a(12115);let s=(0,n.createContext)(void 0);function r(e){let{children:t}=e,[a,r]=(0,n.useState)([]),o=(0,n.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),c=(0,n.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),a={...e,id:t};r(e=>[...e,a]);let l=e.duration||5e3;l>0&&setTimeout(()=>{o(t)},l)},[o]),i=(0,n.useCallback)((e,t)=>{c({title:e,message:t,type:"success"})},[c]),d=(0,n.useCallback)((e,t)=>{c({title:e,message:t,type:"error",duration:0})},[c]),u=(0,n.useCallback)((e,t)=>{c({title:e,message:t,type:"warning"})},[c]),m=(0,n.useCallback)((e,t)=>{c({title:e,message:t,type:"info"})},[c]);return(0,l.jsx)(s.Provider,{value:{toasts:a,addToast:c,removeToast:o,success:i,error:d,warning:u,info:m},children:t})}function o(){let e=(0,n.useContext)(s);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function c(){let{toasts:e,removeToast:t}=o();return 0===e.length?null:(0,l.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:e.map(e=>(0,l.jsx)(i,{toast:e,onRemove:t},e.id))})}function i(e){let{toast:t,onRemove:a}=e,{type:n,title:s,message:r,action:o}=t;return(0,l.jsx)("div",{className:"".concat((()=>{switch(n){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()," border rounded-lg shadow-lg p-4 transform transition-all duration-300 ease-in-out animate-in slide-in-from-right"),children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(n){case"success":return(0,l.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return(0,l.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return(0,l.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.936-.833-2.707 0L3.108 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"info":return(0,l.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})()}),(0,l.jsxs)("div",{className:"ml-3 flex-1",children:[(0,l.jsx)("h3",{className:"font-medium text-sm",children:s}),r&&(0,l.jsx)("p",{className:"mt-1 text-sm opacity-90",children:r}),o&&(0,l.jsx)("button",{onClick:o.onClick,className:"mt-2 text-sm font-medium underline hover:no-underline",children:o.label})]}),(0,l.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,l.jsx)("button",{onClick:()=>a(t.id),className:"inline-flex rounded-md p-1.5 hover:bg-black hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent focus:ring-current",children:(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})})}}}]);