"use strict";exports.id=6433,exports.ids=[6433],exports.modules={6963:(e,a,t)=>{t.d(a,{d:()=>l}),t(60687),t(43210);var s=t(34374);function l(){let e=(0,s.d)();return{showToast:({title:a,message:t,type:s="info",duration:l})=>{if("number"==typeof l)return void e.addToast({title:a??"",message:t,type:s,duration:l});switch(s){case"success":e.success(a??"Sucesso",t);break;case"error":e.error(a??"Erro",t);break;case"warning":e.warning(a??"Aviso",t);break;default:e.info(a??"",t)}}}}},57675:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var s=t(37413),l=t(80665),r=t(1440);async function n({children:e}){let a=await (0,r.M)();return(0,s.jsx)(l.default,{user:a,children:e})}},69565:(e,a,t)=>{t.d(a,{A:()=>n});var s=t(60687),l=t(43210);let r=["ADMIN","GERENTE","USUARIO","FINANCEIRO","ESTOQUE","CLIENTE"];function n({initial:e,onCancel:a,onSubmit:t,submitting:n}){let[o,c]=(0,l.useState)({ativo:!0,role:"USUARIO",status:"ATIVO",...e}),[i,d]=(0,l.useState)({});function m(e,a){c(t=>({...t,[e]:a})),i[e]&&d(a=>{let t={...a};return delete t[e],t})}function u(e){if(!e)return"";let a=e.replace(/\D/g,"").slice(0,10),t=a.slice(0,3),s=a.slice(3,6),l=a.slice(6,10);return l?`(${t})${s}-${l}`:s?`(${t})${s}`:t?`(${t}`:""}function p(e){if(!e)return"";let a=e.replace(/\D/g,"").slice(0,8),t=a.slice(0,2),s=a.slice(2,4),l=a.slice(4,8);return l?`${t}/${s}/${l}`:s?`${t}/${s}`:t}return(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d({});try{let e={...o},a=function(e){if(!e)return;let a=e.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!a)return;let[,t,s,l]=a,r=Number(t),n=Number(s),o=Number(l);if(!(r<1)&&!(r>12)&&!(n<1)&&!(n>31))return`${o.toString().padStart(4,"0")}-${t.padStart(2,"0")}-${s.padStart(2,"0")}`}(String(o.dataNascimento??""));a&&(e.dataNascimento=a),await t(e)}catch(e){e?.fields?d(e.fields):e?.message&&console.error("Erro de API:",e.message)}},className:`max-w-3xl w-full mx-auto space-y-4 rounded-2xl border border-black/10 bg-white p-6 dark:border-white/10 dark:bg-white/5 ${n?"opacity-90 cursor-wait":""}`,children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"text-sm block",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Nome completo"}),(0,s.jsx)("input",{className:`w-full rounded-xl border px-3 py-2 ${i.nomeCompleto?"border-red-500":""}`,disabled:!!n,value:o.nomeCompleto??"",onChange:e=>m("nomeCompleto",e.target.value),required:!0}),i.nomeCompleto&&(0,s.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:i.nomeCompleto})]}),(0,s.jsxs)("label",{className:"text-sm block",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"E-mail"}),(0,s.jsx)("input",{type:"email",className:`w-full rounded-xl border px-3 py-2 ${i.email?"border-red-500":""}`,disabled:!!n,value:o.email??"",onChange:e=>m("email",e.target.value),required:!0}),i.email&&(0,s.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:i.email})]})]}),(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-12 items-center",children:[(0,s.jsxs)("label",{className:"text-sm col-span-4",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Data de anivers\xe1rio"}),(0,s.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"MM/DD/YYYY",className:`w-full h-10 rounded-xl border px-3 py-2 uppercase ${i.dataNascimento?"border-red-500":""}`,disabled:!!n,value:p(String(o.dataNascimento??"")),onChange:e=>m("dataNascimento",p(e.target.value))}),i.dataNascimento&&(0,s.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:i.dataNascimento})]}),(0,s.jsxs)("label",{className:"text-sm col-span-4",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Telefone"}),(0,s.jsx)("input",{type:"tel",inputMode:"tel",placeholder:"(XXX)XXX-XXXX",className:`w-full h-10 rounded-xl border px-3 py-2 ${i.telefone?"border-red-500":""}`,disabled:!!n,value:u(String(o.telefone??"")),onChange:e=>m("telefone",e.target.value),onBlur:e=>m("telefone",u(e.target.value)),onInput:e=>{m("telefone",u(String(e.target.value).replace(/\D/g,"")))}}),i.telefone&&(0,s.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:i.telefone})]}),(0,s.jsxs)("div",{className:"text-sm col-span-4 relative",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"N\xedvel"}),(0,s.jsx)("select",{className:"w-full h-10 rounded-xl border px-3 py-2",disabled:!!n,value:o.role??"USUARIO",onChange:e=>m("role",e.target.value),children:r.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{className:"absolute left-0 top-full mt-2",children:(0,s.jsxs)("label",{className:"text-sm inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:!!o.ativo,disabled:!!n,onChange:e=>m("ativo",e.target.checked)}),"Ativo"]})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"text-sm block",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Endere\xe7o 1"}),(0,s.jsx)("input",{className:"w-full rounded-xl border px-3 py-2",disabled:!!n,value:o.endereco1??"",onChange:e=>m("endereco1",e.target.value)})]}),(0,s.jsxs)("label",{className:"text-sm block",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Endere\xe7o 2"}),(0,s.jsx)("input",{className:"w-full rounded-xl border px-3 py-2",disabled:!!n,value:o.endereco2??"",onChange:e=>m("endereco2",e.target.value)})]})]}),(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-12 items-center",children:[(0,s.jsxs)("label",{className:"text-sm col-span-7",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Cidade"}),(0,s.jsx)("input",{className:"w-full rounded-xl border px-3 py-2 h-10",disabled:!!n,value:o.cidade??"",onChange:e=>m("cidade",e.target.value)})]}),(0,s.jsxs)("label",{className:"text-sm col-span-3",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Estado"}),(0,s.jsx)("input",{className:"w-full rounded-xl border px-3 py-2 h-10 max-w-[140px]",disabled:!!n,value:o.estado??"",onChange:e=>m("estado",e.target.value)})]}),(0,s.jsxs)("label",{className:"text-sm col-span-2",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"CEP"}),(0,s.jsx)("input",{className:`w-full rounded-xl border px-3 py-2 h-10 max-w-[120px] ${i.cep?"border-red-500":""}`,disabled:!!n,value:o.cep??"",onChange:e=>{m("cep",e.target.value.replace(/\D/g,""))},placeholder:"12345678",maxLength:8}),i.cep&&(0,s.jsx)("span",{className:"text-xs text-red-600 mt-1 block",children:i.cep})]})]}),(0,s.jsxs)("label",{className:"text-sm block",children:[(0,s.jsx)("span",{className:"mb-1 block opacity-80",children:"Anota\xe7\xf5es"}),(0,s.jsx)("textarea",{className:"w-full rounded-xl border px-3 py-2",rows:4,disabled:!!n,value:o.anotacoes??"",onChange:e=>m("anotacoes",e.target.value)})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,s.jsxs)("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white hover:brightness-110 disabled:opacity-70",children:[n&&(0,s.jsx)("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-white/60 border-t-white","aria-hidden":!0}),(0,s.jsx)("span",{children:n?"Salvandoâ€¦":"Salvar"})]}),a&&(0,s.jsx)("button",{type:"button",onClick:a,className:"rounded-2xl border border-[#0098DA] px-4 py-2 text-sm text-[#0098DA] hover:bg-[#0098DA] hover:text-white",children:"Cancelar"})]})]})}},77261:(e,a,t)=>{t.d(a,{TK:()=>d,g9:()=>u,hG:()=>m,kg:()=>c,lo:()=>o,wz:()=>i});let s="/api/usuarios";async function l(e){try{return await e.json()}catch{return null}}function r(e){let a={};for(let[t,s]of Object.entries(e))null!=s&&("string"!=typeof s||""!==s.trim())&&(a[t]=s);return a}function n(e){if(e){if(e instanceof Date&&!isNaN(e.getTime())){let a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${a}-${t}-${s}`}return e}}async function o(e){let a=function(e){let a=new URLSearchParams;return e?(Object.entries(e).forEach(([e,t])=>{null!=t&&""!==t&&a.set(e,String(t))}),a.toString()):""}(e),t=a?`${s}?${a}`:s,r=await fetch(t,{cache:"no-store",credentials:"include"});if(!r.ok){let e=await l(r);throw Error(e?.error||e?.message||`HTTP ${r.status}`)}let n=await r.json();return{items:n.items??[],total:n.total??0,page:n.page??1,pageSize:n.pageSize??20}}async function c(e){let a=r({nomeCompleto:e.nomeCompleto,email:e.email,dataNascimento:n(e.dataNascimento),role:e.role??"USUARIO",status:e.status??"ATIVO",telefone:e.telefone,endereco1:e.endereco1,endereco2:e.endereco2,cidade:e.cidade,estado:e.estado,cep:e.cep,anotacoes:e.anotacoes}),t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}),o=await l(t);if(!t.ok){if(o?.error==="VALIDATION_ERROR"&&o?.fields){let e=Error(o.message||"Erro de valida\xe7\xe3o");throw e.fields=o.fields,e}throw Error(o?.error||o?.message||`HTTP ${t.status}`)}return o}async function i(e){let a=await fetch(`${s}/${e}`,{cache:"no-store",credentials:"include"});if(!a.ok){let e=await l(a);throw Error(e?.error||e?.message||`HTTP ${a.status}`)}return await a.json()}async function d(e,a){let t=r({nomeCompleto:a.nomeCompleto,email:a.email,dataNascimento:n(a.dataNascimento),role:a.role,status:a.status,telefone:a.telefone,endereco1:a.endereco1,endereco2:a.endereco2,cidade:a.cidade,estado:a.estado,cep:a.cep,anotacoes:a.anotacoes}),o=await fetch(`${s}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),c=await l(o);if(!o.ok){if(c?.error==="VALIDATION_ERROR"&&c?.fields){let e=Error(c.message||"Erro de valida\xe7\xe3o");throw e.fields=c.fields,e}throw Error(c?.error||c?.message||`HTTP ${o.status}`)}return c}async function m(e){let a=await fetch(`${s}/${e}`,{method:"DELETE",credentials:"include"}),t=await l(a);if(!a.ok)throw Error(t?.error||t?.message||`HTTP ${a.status}`);return t}async function u(e,a){let t=await fetch(`${s}/${e}/status`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({ativo:a})}),r=await l(t);if(!t.ok)throw Error(r?.error||r?.message||`HTTP ${t.status}`);return r}}};