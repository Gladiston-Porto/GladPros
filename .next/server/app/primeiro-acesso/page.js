(()=>{var e={};e.id=5007,e.ids=[5007],e.modules={866:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=a(65239),t=a(48088),n=a(88170),l=a.n(n),i=a(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(s,o);let d={children:["",{children:["primeiro-acesso",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,67473)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\primeiro-acesso\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,54431)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,54413)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\primeiro-acesso\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/primeiro-acesso/page",pathname:"/primeiro-acesso",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1033:(e,s,a)=>{Promise.resolve().then(a.bind(a,61563))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10761:(e,s,a)=>{Promise.resolve().then(a.bind(a,67473))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31376:(e,s,a)=>{"use strict";a.d(s,{r:()=>t});var r=a(97888);class t{static validatePassword(e){let s=[];return(!e||e.length<9)&&s.push("Senha deve ter no m\xednimo 9 caracteres"),/[A-Z]/.test(e)||s.push("Senha deve conter pelo menos 1 letra mai\xfascula"),/[0-9]/.test(e)||s.push("Senha deve conter pelo menos 1 n\xfamero"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)||s.push("Senha deve conter pelo menos 1 s\xedmbolo especial"),{valid:0===s.length,errors:s}}static async hashPassword(e){return r.Ay.hash(e,12)}static async verifyPassword(e,s){return r.Ay.compare(e,s)}static generateProvisionalPassword(){let e="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789",s="!@#$%&*",a="";a+="ABCDEFGHJKLMNPQRSTUVWXYZ"[Math.floor(25*Math.random())],a+="23456789"[Math.floor(8*Math.random())],a+=s[Math.floor(Math.random()*s.length)];for(let s=0;s<6;s++)a+=e[Math.floor(Math.random()*e.length)];return a.split("").sort(()=>Math.random()-.5).join("")}static getPasswordStrength(e){let s=0,a=[];e.length>=9&&(s+=20,a.push("M\xednimo 9 caracteres")),/[A-Z]/.test(e)&&(s+=20,a.push("Letra mai\xfascula")),/[a-z]/.test(e)&&(s+=10,a.push("Letra min\xfascula")),/[0-9]/.test(e)&&(s+=20,a.push("N\xfamero")),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)&&(s+=20,a.push("S\xedmbolo especial")),e.length>=12&&(s+=10,a.push("Senha longa (12+ caracteres)"));let r="Muito fraca",t="#ef4444";return s>=90?(r="Muito forte",t="#22c55e"):s>=70?(r="Forte",t="#84cc16"):s>=50?(r="Moderada",t="#eab308"):s>=30&&(r="Fraca",t="#f97316"),{score:s,label:r,color:t,criteriaMet:a}}}},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},61563:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var r=a(60687),t=a(30474),n=a(16189),l=a(43210),i=a(31376);function o(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),a=s?.get("userId"),[o,d]=(0,l.useState)(0),[c,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null),[p,h]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[f,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(""),[y,w]=(0,l.useState)(""),[P,C]=(0,l.useState)(""),[S,D]=(0,l.useState)(null),q=[{id:"password",title:"Nova Senha",description:"Defina uma senha segura para sua conta",completed:!1},{id:"pin",title:"PIN de Seguran\xe7a",description:"Crie um PIN de 4 d\xedgitos para desbloqueio",completed:!1},{id:"security",title:"Pergunta de Seguran\xe7a",description:"Configure uma pergunta para recupera\xe7\xe3o de conta",completed:!1},{id:"confirm",title:"Confirma\xe7\xe3o",description:"Revise e finalize sua configura\xe7\xe3o",completed:!1}],k=async()=>{o<q.length-1?d(o+1):await M()},M=async()=>{u(!0),x(null);try{let s=await fetch("/api/auth/first-access/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(a),newPassword:p,pin:f,securityQuestion:y,securityAnswer:P.toLowerCase().trim()})}),r=await s.json();if(!s.ok)throw Error(r.error||"Erro ao configurar conta");e.push("/dashboard?setup=complete")}catch(e){console.error("Erro na configura\xe7\xe3o:",e),x(e.message)}finally{u(!1)}};return a?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(t.default,{src:"/images/LOGO_300.png",alt:"GladPros",width:60,height:60,className:"rounded-lg"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Bem-vindo ao GladPros!"}),(0,r.jsx)("p",{className:"text-blue-100",children:"Configure sua conta para come\xe7ar"})]})]})}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("div",{className:"w-1/3 bg-gray-50 p-6",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-800 mb-4",children:"Passos da Configura\xe7\xe3o"}),(0,r.jsx)("div",{className:"space-y-4",children:q.map((e,s)=>(0,r.jsxs)("div",{className:`flex items-center space-x-3 p-3 rounded-lg ${s===o?"bg-blue-100 border-2 border-blue-300":s<o?"bg-green-100 border-2 border-green-300":"bg-white border-2 border-gray-200"}`,children:[(0,r.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${s===o?"bg-blue-500 text-white":s<o?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:s<o?"✓":s+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-sm",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"w-2/3 p-8",children:[m&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-700 text-sm",children:m})}),0===o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Defina sua Nova Senha"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Crie uma senha forte que ser\xe1 usada para acessar sua conta."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nova Senha"}),(0,r.jsx)("input",{type:"password",value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite sua nova senha"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha"}),(0,r.jsx)("input",{type:"password",value:g,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite novamente sua senha"})]}),S&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"For\xe7a da Senha"}),(0,r.jsx)("span",{className:"text-sm font-semibold",style:{color:S.color},children:S.label})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${S.score}%`,backgroundColor:S.color}})}),(0,r.jsx)("div",{className:"space-y-1",children:S.criteriaMet.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-green-500 text-xs",children:"✓"}),(0,r.jsx)("span",{className:"text-xs text-gray-600",children:e})]},s))})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 text-sm mb-2",children:"Requisitos da Senha:"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,r.jsx)("li",{children:"• M\xednimo 9 caracteres"}),(0,r.jsx)("li",{children:"• Pelo menos 1 letra mai\xfascula"}),(0,r.jsx)("li",{children:"• Pelo menos 1 n\xfamero"}),(0,r.jsx)("li",{children:"• Pelo menos 1 s\xedmbolo (!@#$%&*)"})]})]})]})]}),1===o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"PIN de Seguran\xe7a"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Crie um PIN de 4 d\xedgitos que ser\xe1 usado para desbloquear sua conta em casos de bloqueio."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PIN (4 d\xedgitos)"}),(0,r.jsx)("input",{type:"password",value:f,onChange:e=>{j(e.target.value.replace(/\D/g,"").slice(0,4))},className:"w-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest",placeholder:"****",maxLength:4})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar PIN"}),(0,r.jsx)("input",{type:"password",value:v,onChange:e=>{N(e.target.value.replace(/\D/g,"").slice(0,4))},className:"w-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest",placeholder:"****",maxLength:4})]}),f&&v&&f!==v&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:"Os PINs n\xe3o coincidem"}),(0,r.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-800 text-sm mb-2",children:"\uD83D\uDD12 Sobre o PIN:"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,r.jsx)("li",{children:"• Use apenas n\xfameros (0-9)"}),(0,r.jsx)("li",{children:"• Evite sequ\xeancias \xf3bvias (1234, 0000)"}),(0,r.jsx)("li",{children:"• Ser\xe1 necess\xe1rio para desbloquear a conta"}),(0,r.jsx)("li",{children:"• Mantenha-o seguro e n\xe3o compartilhe"})]})]})]})]}),2===o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Pergunta de Seguran\xe7a"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Escolha uma pergunta de seguran\xe7a que ser\xe1 usada para recuperar sua conta."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pergunta de Seguran\xe7a"}),(0,r.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Selecione uma pergunta..."}),["Qual \xe9 o nome do seu primeiro animal de estima\xe7\xe3o?","Em que cidade voc\xea nasceu?","Qual \xe9 o nome de solteira da sua m\xe3e?","Qual foi sua primeira escola?","Qual \xe9 seu filme favorito?","Qual \xe9 o nome da sua rua favorita?","Qual foi seu primeiro emprego?","Qual \xe9 sua comida favorita?"].map((e,s)=>(0,r.jsx)("option",{value:e,children:e},s))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resposta"}),(0,r.jsx)("input",{type:"text",value:P,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite sua resposta"})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-green-800 text-sm mb-2",children:"\uD83D\uDCA1 Dicas:"}),(0,r.jsxs)("ul",{className:"text-sm text-green-700 space-y-1",children:[(0,r.jsx)("li",{children:"• Escolha algo que voc\xea nunca esquecer\xe1"}),(0,r.jsx)("li",{children:"• Seja espec\xedfico na resposta"}),(0,r.jsx)("li",{children:"• Use apenas letras min\xfasculas"}),(0,r.jsx)("li",{children:"• Evite acentos e caracteres especiais"})]})]})]})]}),3===o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Configura\xe7\xe3o Completa"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Revise suas configura\xe7\xf5es antes de finalizar."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-800 mb-3",children:"✓ Configura\xe7\xf5es Definidas:"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-green-700",children:"Nova senha:"}),(0,r.jsx)("span",{className:"text-green-800 font-medium",children:"••••••••••"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-green-700",children:"PIN de seguran\xe7a:"}),(0,r.jsx)("span",{className:"text-green-800 font-medium",children:"••••"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-green-700",children:"Pergunta de seguran\xe7a:"}),(0,r.jsx)("span",{className:"text-green-800 font-medium",children:"Configurada"})]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 text-sm mb-2",children:"\uD83C\uDF89 Pr\xf3ximos Passos:"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,r.jsx)("li",{children:"• Sua senha provis\xf3ria ser\xe1 substitu\xedda"}),(0,r.jsx)("li",{children:"• Voc\xea ser\xe1 redirecionado para o dashboard"}),(0,r.jsx)("li",{children:"• Poder\xe1 acessar todas as funcionalidades do sistema"}),(0,r.jsx)("li",{children:"• Suas configura\xe7\xf5es de seguran\xe7a estar\xe3o ativas"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t",children:[(0,r.jsx)("button",{onClick:()=>o>0&&d(o-1),disabled:0===o||c,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),(0,r.jsxs)("button",{onClick:k,disabled:c||0===o&&!(p&&g&&p===g&&i.r.validatePassword(p).valid)||1===o&&!(4===f.length&&4===v.length&&f===v&&/^\d{4}$/.test(f))||2===o&&!(y&&P.length>=3),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[c&&(0,r.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),o===q.length-1?"Finalizar Configura\xe7\xe3o":"Pr\xf3ximo"]})]})]})]})]})}):(0,r.jsx)("div",{children:"Redirecionando..."})}function d(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{children:"Carregando..."}),children:(0,r.jsx)(o,{})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67473:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\gladi\\\\Documents\\\\gladpros-nextjs\\\\src\\\\app\\\\primeiro-acesso\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\primeiro-acesso\\page.tsx","default")},79551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[7719,4250,7888,7920],()=>a(866));module.exports=r})();