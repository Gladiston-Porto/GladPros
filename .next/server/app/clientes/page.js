(()=>{var e={};e.id=4372,e.ids=[4372],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5091:(e,t,a)=>{"use strict";a.d(t,{default:()=>P});var s=a(60687),r=a(43210),o=a.n(r),i=a(85814),l=a.n(i);function n({currentPage:e,totalPages:t,pageSize:a,total:r,onPageChange:i,onPageSizeChange:l}){let n=Math.min(e*a,r);return t<=1?null:(0,s.jsx)("div",{className:"bg-white px-4 py-3 border border-gray-200 rounded-lg shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,s.jsx)("button",{onClick:()=>i(e-1),disabled:1===e,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),(0,s.jsx)("button",{onClick:()=>i(e+1),disabled:e===t,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xf3ximo"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Mostrando"," ",(0,s.jsx)("span",{className:"font-medium",children:(e-1)*a+1})," ","a"," ",(0,s.jsx)("span",{className:"font-medium",children:n})," ","de"," ",(0,s.jsx)("span",{className:"font-medium",children:r})," ","resultado",1!==r?"s":""]}),l&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{htmlFor:"pageSize",className:"text-sm text-gray-700",children:"Por p\xe1gina:"}),(0,s.jsxs)("select",{id:"pageSize",className:"border border-gray-300 rounded px-2 py-1 text-sm",value:a,onChange:e=>l(Number(e.target.value)),children:[(0,s.jsx)("option",{value:5,children:"5"}),(0,s.jsx)("option",{value:12,children:"12"}),(0,s.jsx)("option",{value:25,children:"25"}),(0,s.jsx)("option",{value:50,children:"50"})]})]})]}),(0,s.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,s.jsxs)("button",{onClick:()=>i(e-1),disabled:1===e,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("span",{className:"sr-only",children:"P\xe1gina anterior"}),(0,s.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),(()=>{let a=[];if(t<=7)for(let e=1;e<=t;e++)a.push(e);else if(e<=4){for(let e=1;e<=5;e++)a.push(e);a.push("..."),a.push(t)}else if(e>=t-3){a.push(1),a.push("...");for(let e=t-4;e<=t;e++)a.push(e)}else{a.push(1),a.push("...");for(let t=e-1;t<=e+1;t++)a.push(t);a.push("..."),a.push(t)}return a})().map((t,a)=>(0,s.jsx)(o().Fragment,{children:"..."===t?(0,s.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}):(0,s.jsx)("button",{onClick:()=>i(t),className:`
                      relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors
                      ${e===t?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}
                    `,children:t})},a)),(0,s.jsxs)("button",{onClick:()=>i(e+1),disabled:e===t,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("span",{className:"sr-only",children:"Pr\xf3xima p\xe1gina"}),(0,s.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})]})]})})}var d=a(99270);let c=(0,a(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var p=a(31158),x=a(78272);let u=(e,t="clientes")=>{let a=new Blob([["ID,Nome/Empresa,Tipo,E-mail,Telefone,Cidade,Estado,Status,Criado Em",...e.map(e=>[e.id,e.nomeCompletoOuRazao||"",e.tipo||"",e.email||"",e.telefone||"",e.cidade||"",e.estado||"",e.ativo?"Ativo":"Inativo",e.criadoEm?new Date(e.criadoEm).toLocaleDateString("pt-BR"):""]).map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`${t}.csv`,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(s)},h=async e=>{let t=await fetch("/api/clientes/export/csv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw e?.message?Error(e.message):Error("Falha ao gerar CSV")}let a=await t.blob(),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`${e.filename||"clientes"}.csv`,r.click(),URL.revokeObjectURL(s)},m=async(e,t="clientes")=>{try{let a=await fetch("/api/clientes/export/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientes:e,filename:t})});if(!a.ok){let e=await a.json().catch(()=>({}));throw e?.message?Error(e.message):Error("Falha ao gerar PDF")}let s=await a.blob(),r=window.URL.createObjectURL(s),o=document.createElement("a");o.href=r,o.download=`${t}.pdf`,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(r)}catch(e){throw e}};async function g(e){let t=await fetch("/api/clientes/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e?.error||"Falha na a\xe7\xe3o em lote")}return t.json()}var b=a(6963);function f({q:e,onQ:t,tipo:a,onTipo:o,status:i,onStatus:n,total:g,showNew:f=!0,clientes:y,scope:v="allFiltered",selectedCount:j=0,onScopeChange:w,loading:k=!1}){let[N,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)(!1),A=(0,r.useRef)(null),[P,T]=(0,r.useState)(!1),[D,R]=(0,r.useState)(!1),[O,z]=(0,r.useState)(!1),q=(0,r.useRef)(null),U=(0,r.useRef)(null),L=(0,r.useRef)(null),{showToast:$}=(0,b.d)(),M=async t=>{C(!1),E(!0);let s=v||"allFiltered",r="selected"===s?j||0:g;if(0===r)return void $({title:"Aviso",message:"Nenhum cliente para exportar",type:"info"});if(!function(e,t=500){return e>t}(r)||window.confirm(`Voc\xea est\xe1 prestes a exportar ${r} registros. Isso pode demorar. Deseja continuar?`))try{"csv"===t?("selected"===s?u(y):await h({filename:"clientes",filters:{q:e,tipo:""===a?"all":a,ativo:"ATIVO"===i||"INATIVO"!==i&&"all"}}),$({title:"Exportado",message:"CSV gerado com sucesso",type:"success"})):("selected"===s?await m(y):await fetch("/api/clientes/export/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:"clientes",filters:{q:e,tipo:""===a?"all":a,ativo:"ATIVO"===i||"INATIVO"!==i&&"all"}})}).then(async e=>{if(!e.ok)throw Error("Falha ao exportar PDF");let t=await e.blob(),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="clientes.pdf",s.click(),URL.revokeObjectURL(a)}),$({title:"Exportado",message:"PDF gerado com sucesso",type:"success"}))}catch{console.error("Erro na exporta\xe7\xe3o"),$({title:"Erro",message:`Erro ao exportar ${t.toUpperCase()}`,type:"error"})}finally{E(!1)}};return(0,s.jsxs)("div",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.A,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-400"}),(0,s.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"Buscar por nome ou e-mail",className:"w-[260px] rounded-xl border border-black/10 bg-white px-9 py-2 text-sm outline-none placeholder:text-neutral-400 focus:border-[#0098DA] dark:border-white/10 dark:bg-white/5 text-foreground"})]}),(0,s.jsxs)("div",{className:"relative","data-slot":"tipo-menu",ref:q,children:[(0,s.jsxs)("button",{onClick:()=>T(e=>!e),className:"rounded-xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 text-foreground","aria-haspopup":"menu","aria-expanded":P,children:[""===a?"Todos os Tipos":a,(0,s.jsx)("span",{className:"ml-2",children:"▾"})]}),P&&(0,s.jsxs)("div",{className:"absolute left-0 top-full mt-1 w-44 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-20",children:[(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{o(""),T(!1)},children:"Todos os Tipos"}),(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{o("PF"),T(!1)},children:"Pessoa F\xedsica"}),(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{o("PJ"),T(!1)},children:"Pessoa Jur\xeddica"})]})]}),(0,s.jsxs)("div",{className:"relative","data-slot":"status-menu",ref:U,children:[(0,s.jsxs)("button",{onClick:()=>R(e=>!e),className:"rounded-xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 text-foreground","aria-haspopup":"menu","aria-expanded":D,children:[""===i?"Todos":"ATIVO"===i?"Status":"Inativos",(0,s.jsx)("span",{className:"ml-2",children:"▾"})]}),D&&(0,s.jsxs)("div",{className:"absolute left-0 top-full mt-1 w-40 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-20",children:[(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{n(""),R(!1)},children:"Todos"}),(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{n("ATIVO"),R(!1)},children:"Ativos"}),(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{n("INATIVO"),R(!1)},children:"Inativos"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[w&&(0,s.jsxs)("div",{className:"relative",ref:L,children:[(0,s.jsxs)("button",{onClick:()=>z(e=>!e),className:"rounded-2xl border border-black/10 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 text-foreground","aria-haspopup":"menu","aria-expanded":O,children:["Selecionados",(0,s.jsx)("span",{className:"ml-2",children:"▾"})]}),O&&(0,s.jsxs)("div",{className:"absolute left-0 top-full mt-1 w-44 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-20",children:[(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{w("selected"),z(!1)},children:"Selecionados"}),(0,s.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{w("allFiltered"),z(!1)},children:"Todos os filtrados"})]})]}),(0,s.jsxs)("div",{className:"relative",ref:A,children:[(0,s.jsxs)("button",{onClick:()=>!S&&C(!N),className:"rounded-2xl border border-black/10 bg-white px-3 py-2 text-sm hover:bg-black/5 dark:border-white/10 dark:bg-white/5 flex items-center gap-1 disabled:opacity-50",disabled:k||S,"aria-busy":S,children:[S?(0,s.jsx)(c,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(p.A,{className:"h-4 w-4"}),S?"Exportando":"Exportar",!S&&(0,s.jsx)(x.A,{className:"h-3 w-3"})]}),N&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 rounded-lg border border-black/10 bg-white shadow-lg dark:border-white/10 dark:bg-gray-800 z-10",children:[(0,s.jsxs)("button",{onClick:()=>M("csv"),className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg flex items-center gap-2",children:[(0,s.jsx)("span",{children:"\uD83D\uDCCA"}),(0,s.jsx)("span",{children:"Exportar CSV"})]}),(0,s.jsxs)("button",{onClick:()=>M("pdf"),className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg flex items-center gap-2",children:[(0,s.jsx)("span",{children:"\uD83D\uDCC4"}),(0,s.jsx)("span",{children:"Exportar PDF"})]})]})]}),f&&(0,s.jsx)(l(),{href:"/clientes/novo",className:"rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white hover:brightness-110 inline-flex items-center gap-1",children:"Novo Cliente"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[k&&(0,s.jsx)("div",{className:"text-xs opacity-70",children:"Carregando…"}),(0,s.jsxs)("div",{className:"text-xs opacity-60",children:[g.toLocaleString("pt-BR")," resultado(s)"]})]})]})}var y=a(57175),v=a(88233),j=a(54220);function w({data:e,onEdit:t,onDelete:a,onToggleStatus:o,sortKey:i,sortDir:l,onSortChange:n,onSelectedChange:d}){let c=(0,r.useMemo)(()=>e??[],[e]),[p,x]=(0,r.useState)(new Set),u=p.size>0&&p.size===c.length;return 0===c.length?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Nenhum cliente encontrado"})}):(0,s.jsxs)("div",{className:"overflow-x-auto rounded-2xl border border-black/10 bg-white dark:border-white/10 dark:bg-white/5",children:[(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left opacity-70",children:[(0,s.jsx)("th",{className:"px-3 py-2",children:(0,s.jsx)("input",{"aria-label":"Selecionar todos",type:"checkbox",checked:u,onChange:e=>{let t=c.map(e=>e.id),a=e.target.checked?new Set(t):new Set;x(a),d?.(Array.from(a))}})}),(0,s.jsx)(k,{label:"Nome/Raz\xe3o Social",onClick:()=>n("nome","nome"===i&&"asc"===l?"desc":"asc"),active:"nome"===i,dir:l,ariaSort:"nome"===i?"asc"===l?"ascending":"descending":"none"}),(0,s.jsx)(k,{label:"Tipo",onClick:()=>n("tipo","tipo"===i&&"asc"===l?"desc":"asc"),active:"tipo"===i,dir:l,ariaSort:"tipo"===i?"asc"===l?"ascending":"descending":"none"}),(0,s.jsx)(k,{label:"E-mail",onClick:()=>n("email","email"===i&&"asc"===l?"desc":"asc"),active:"email"===i,dir:l,ariaSort:"email"===i?"asc"===l?"ascending":"descending":"none"}),(0,s.jsx)(k,{label:"Telefone",onClick:()=>n("telefone","telefone"===i&&"asc"===l?"desc":"asc"),active:"telefone"===i,dir:l,ariaSort:"telefone"===i?"asc"===l?"ascending":"descending":"none"}),(0,s.jsx)(k,{label:"Documento",onClick:()=>n("documento","documento"===i&&"asc"===l?"desc":"asc"),active:"documento"===i,dir:l,ariaSort:"documento"===i?"asc"===l?"ascending":"descending":"none"}),(0,s.jsx)(k,{label:"Cidade/Estado",onClick:()=>n("cidadeEstado","cidadeEstado"===i&&"asc"===l?"desc":"asc"),active:"cidadeEstado"===i,dir:l,ariaSort:"cidadeEstado"===i?"asc"===l?"ascending":"descending":"none"}),(0,s.jsx)(k,{label:"Status",onClick:()=>n("status","status"===i&&"asc"===l?"desc":"asc"),active:"status"===i,dir:l,ariaSort:"status"===i?"asc"===l?"ascending":"descending":"none"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:c.map((e,r)=>(0,s.jsxs)("tr",{className:"border-t border-black/5 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/10 ",children:[(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("input",{"aria-label":`Selecionar ${e.nomeCompletoOuRazao}`,type:"checkbox",checked:p.has(e.id),onChange:t=>{let a=new Set(p);t.target.checked?a.add(e.id):a.delete(e.id),x(a),d?.(Array.from(a))}})}),(0,s.jsx)("td",{className:"px-3 py-3 font-medium",children:(0,s.jsx)("div",{className:"font-medium text-foreground dark:text-white",children:e.nomeCompletoOuRazao})}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${"PF"===e.tipo?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300":"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300"}`,children:e.tipo})}),(0,s.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.email}),(0,s.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.telefone}),(0,s.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.documentoMasked}),(0,s.jsx)("td",{className:"px-3 py-3 text-gray-600 dark:text-gray-300",children:e.cidade&&e.estado?`${e.cidade}, ${e.estado}`:e.cidade||e.estado||"-"}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${e.ativo?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"}`,children:e.ativo?"Ativo":"Inativo"})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsxs)("button",{onClick:()=>t(e.id),className:"rounded-lg px-2 py-1 text-xs hover:bg-black/5 dark:hover:bg-white/10",children:[(0,s.jsx)(y.A,{className:"mr-1 inline h-3.5 w-3.5"})," Editar"]}),(0,s.jsx)("button",{onClick:()=>o(e.id,e.ativo),className:`rounded-lg px-2 py-1 text-xs hover:bg-opacity-20 ${e.ativo?"text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:e.ativo?"⏸️ Desativar":"▶️ Ativar"}),(0,s.jsxs)("button",{onClick:()=>a(e.id),className:"rounded-lg px-2 py-1 text-xs text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:[(0,s.jsx)(v.A,{className:"mr-1 inline h-3.5 w-3.5"})," Excluir"]})]})})]},e.id))})]}),p.size>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 border-t border-black/10 p-3 text-xs dark:border-white/10",children:[(0,s.jsxs)("div",{children:[p.size," selecionado(s)"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{Array.from(p).forEach(e=>{let t=c.find(t=>t.id===e);t&&!t.ativo&&o(e,!1)}),x(new Set),d?.([])},className:"rounded-lg px-2 py-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20",children:"▶️ Ativar Selecionados"}),(0,s.jsx)("button",{onClick:()=>{Array.from(p).forEach(e=>{let t=c.find(t=>t.id===e);t&&t.ativo&&o(e,!0)}),x(new Set),d?.([])},className:"rounded-lg px-2 py-1 text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20",children:"⏸️ Desativar Selecionados"}),(0,s.jsx)("button",{onClick:()=>{Array.from(p).forEach(e=>a(e)),x(new Set),d?.([])},className:"rounded-lg px-2 py-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"\uD83D\uDDD1️ Excluir Selecionados"})]})]})]})}function k({label:e,onClick:t,active:a,dir:r,ariaSort:o="none"}){return(0,s.jsx)("th",{className:"px-3 py-2","aria-sort":o,children:(0,s.jsxs)("button",{onClick:t,"aria-label":`Ordenar por ${e}`,className:`inline-flex items-center gap-1 rounded px-1 py-0.5 hover:bg-black/5 dark:hover:bg-white/10 ${a?"font-medium":""}`,children:[e," ",(0,s.jsx)(j.A,{className:`h-3.5 w-3.5 ${a?"opacity-100":"opacity-50"}`}),(0,s.jsx)("span",{className:"sr-only",children:"asc"===r?"asc":"desc"})]})})}async function N(e,t){let a=new URLSearchParams;e.q&&a.append("q",e.q),e.tipo&&"all"!==e.tipo&&a.append("tipo",e.tipo),"all"!==e.ativo&&a.append("ativo",String(e.ativo)),e.page&&a.append("page",String(e.page)),e.pageSize&&a.append("pageSize",String(e.pageSize)),e.sortKey&&a.append("sortKey",e.sortKey),e.sortDir&&a.append("sortDir",e.sortDir);let s=await fetch(`/api/clientes?${a.toString()}`,{signal:t});if(!s.ok)throw Error("Erro ao carregar clientes");return s.json()}async function C(e){if(!(await fetch(`/api/clientes/${e}`,{method:"DELETE"})).ok)throw Error("Erro ao remover cliente")}async function S(e,t){if(!(await fetch(`/api/clientes/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ativo:t})})).ok)throw Error("Erro ao alterar status do cliente")}var E=a(17727),A=a(37099);function P(){let{confirm:e,Dialog:t}=(0,E.S)(),{showToast:a}=(0,b.d)(),[o,i]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[p,x]=(0,r.useState)("ATIVO"),[u,h]=(0,r.useState)(1),[m,y]=(0,r.useState)(10),[v,j]=(0,r.useState)(0),[k,P]=(0,r.useState)([]),[T,D]=(0,r.useState)(!0),[R,O]=(0,r.useState)([]),[z,q]=(0,r.useState)("allFiltered"),[U,L]=(0,r.useState)("nome"),[$,M]=(0,r.useState)("asc"),[F,I]=(0,r.useState)(""),V=(0,r.useCallback)(async e=>{D(!0);try{let t=await N({q:o,tipo:d,ativo:"ATIVO"===p||"INATIVO"!==p&&"all",page:u,pageSize:m,sortKey:U,sortDir:$},e);P(t.data),j(t.total)}catch(e){console.error("Erro ao carregar clientes:",e)}finally{D(!1)}},[o,d,p,u,m,U,$]);async function _(t){if(await e({title:"Excluir cliente",message:"Tem certeza que deseja excluir este cliente?",confirmText:"Excluir",tone:"danger"}))try{await C(String(t)),a({title:"Exclu\xeddo",message:"Cliente exclu\xeddo com sucesso",type:"success"}),V()}catch(e){console.error(e),a({title:"Erro",message:"Falha ao excluir cliente",type:"error"})}}async function J(t,s){let r=s?"desativar":"ativar";if(await e({title:`${r.charAt(0).toUpperCase()+r.slice(1)} cliente`,message:`Tem certeza que deseja ${r} este cliente?`,confirmText:r.charAt(0).toUpperCase()+r.slice(1),tone:s?"danger":"default"}))try{await S(String(t),!s),a({title:"Sucesso",message:"Status atualizado",type:"success"}),V()}catch(e){console.error(e),a({title:"Erro",message:"Erro ao alterar status do cliente",type:"error"})}}let B=(0,r.useMemo)(()=>Math.max(1,Math.ceil(v/m)),[v,m]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"font-title text-xl",children:"Clientes"}),(0,s.jsx)(l(),{href:"/clientes/novo",className:"rounded-2xl bg-[#0098DA] px-4 py-2 text-sm text-white hover:brightness-110",children:"Novo Cliente"})]}),(0,s.jsx)(f,{q:F,onQ:I,tipo:d,onTipo:c,status:p,onStatus:x,total:v,showNew:!1,clientes:k,scope:z,selectedCount:R.length,onScopeChange:e=>q(e),loading:T}),(0,s.jsx)(A.Panel,{title:"Lista de Clientes",children:T?(0,s.jsx)("div",{className:"p-6 text-sm opacity-60",children:"Carregando…"}):(0,s.jsx)(w,{data:k,onEdit:e=>location.href=`/clientes/${e}`,onDelete:_,onToggleStatus:J,sortKey:U,sortDir:$,onSortChange:(e,t)=>{L(e),M(t),h(1)},onSelectedChange:O})}),(0,s.jsx)(t,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"opacity-60",children:["P\xe1gina ",u," de ",B]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[R.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:async()=>{if(await e({title:"Ativar selecionados",message:`Ativar ${R.length} cliente(s)?`,confirmText:"Ativar"}))try{await g({action:"activate",scope:"selected",ids:R}),a({title:"Sucesso",message:"Clientes ativados",type:"success"}),O([]),V()}catch{a({title:"Erro",message:"Falha ao ativar selecionados",type:"error"})}},className:"rounded-lg border px-3 py-1",children:"Ativar Selecionados"}),(0,s.jsx)("button",{onClick:async()=>{if(await e({title:"Desativar selecionados",message:`Desativar ${R.length} cliente(s)?`,confirmText:"Desativar",tone:"danger"}))try{await g({action:"deactivate",scope:"selected",ids:R}),a({title:"Sucesso",message:"Clientes desativados",type:"success"}),O([]),V()}catch{a({title:"Erro",message:"Falha ao desativar selecionados",type:"error"})}},className:"rounded-lg border px-3 py-1",children:"Desativar Selecionados"}),(0,s.jsx)("button",{onClick:async()=>{if(await e({title:"Excluir selecionados",message:`Excluir ${R.length} cliente(s)? Essa a\xe7\xe3o n\xe3o pode ser desfeita.`,confirmText:"Excluir",tone:"danger"}))try{await g({action:"delete",scope:"selected",ids:R}),a({title:"Sucesso",message:"Clientes exclu\xeddos",type:"success"}),O([]),V()}catch{a({title:"Erro",message:"Falha ao excluir selecionados",type:"error"})}},className:"rounded-lg border px-3 py-1 text-red-600",children:"Excluir Selecionados"})]}),(0,s.jsx)("button",{disabled:u<=1,onClick:()=>h(e=>Math.max(1,e-1)),className:"rounded-lg border px-3 py-1 disabled:opacity-50",children:"Anterior"}),(0,s.jsx)("button",{disabled:u>=B,onClick:()=>h(e=>Math.min(B,e+1)),className:"rounded-lg border px-3 py-1 disabled:opacity-50",children:"Pr\xf3ximo"})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n,{currentPage:u,totalPages:B,pageSize:m,total:v,onPageChange:e=>h(e),onPageSizeChange:e=>{y(e),h(1)}})})]})}},6963:(e,t,a)=>{"use strict";a.d(t,{d:()=>r}),a(60687),a(43210);var s=a(34374);function r(){let e=(0,s.d)();return{showToast:({title:t,message:a,type:s="info",duration:r})=>{if("number"==typeof r)return void e.addToast({title:t??"",message:a,type:s,duration:r});switch(s){case"success":e.success(t??"Sucesso",a);break;case"error":e.error(t??"Erro",a);break;case"warning":e.warning(t??"Aviso",a);break;default:e.info(t??"",a)}}}}},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22512:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s.default});var s=a(94693)},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},31421:e=>{"use strict";e.exports=require("node:child_process")},33369:(e,t,a)=>{Promise.resolve().then(a.bind(a,94693))},33873:e=>{"use strict";e.exports=require("path")},46521:(e,t,a)=>{Promise.resolve().then(a.bind(a,5091))},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},54220:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},57175:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78272:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},82072:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=a(65239),r=a(48088),o=a(88170),i=a.n(o),l=a(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);a.d(t,n);let d={children:["",{children:["clientes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,22512)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\clientes\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,82379)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\clientes\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,54431)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,54413)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\clientes\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/clientes/page",pathname:"/clientes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},82379:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(37413),r=a(80665),o=a(1440);async function i({children:e}){let t=await (0,o.M)();return(0,s.jsx)(r.default,{user:t,children:e})}},88233:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},94693:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\gladi\\\\Documents\\\\gladpros-nextjs\\\\src\\\\modules\\\\clientes\\\\pages\\\\ListPage.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\modules\\clientes\\pages\\ListPage.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[7719,9942,4250,4553,5814,6994,6792,7920,8964],()=>a(82072));module.exports=s})();