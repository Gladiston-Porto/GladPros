(()=>{var e={};e.id=3148,e.ids=[3148],e.modules={579:(e,s,a)=>{"use strict";a.d(s,{$n:()=>m,Ex:()=>c,Gl:()=>x,JU:()=>i,TM:()=>l,gp:()=>t,l6:()=>n,pd:()=>o,wn:()=>d});var r=a(60687);a(43210);let t={blue:"#0A2C52",orange:"#D6631C"},i=({children:e,required:s,className:a})=>(0,r.jsxs)("label",{className:`block text-sm font-medium text-slate-700 ${a||""}`,children:[e,s?(0,r.jsx)("span",{className:"text-red-500",children:" *"}):null]}),o=e=>(0,r.jsx)("input",{...e,className:["w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm","focus:outline-none focus:ring-2 focus:ring-[var(--gp-orange)]",e.className??""].join(" ")}),l=e=>(0,r.jsx)("textarea",{rows:e.rows??4,...e,className:["w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm","focus:outline-none focus:ring-2 focus:ring-[var(--gp-orange)]",e.className??""].join(" ")}),n=e=>(0,r.jsx)("select",{...e,className:["w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm","focus:outline-none focus:ring-2 focus:ring-[var(--gp-orange)]",e.className??""].join(" ")}),d=({title:e,subtitle:s,children:a,right:t})=>(0,r.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-slate-800",children:e}),s?(0,r.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:s}):null]}),t]}),a]}),c=({children:e,color:s="slate"})=>(0,r.jsx)("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs ${{slate:"bg-slate-100 text-slate-700",green:"bg-emerald-100 text-emerald-700",orange:"bg-amber-100 text-amber-700",red:"bg-rose-100 text-rose-700"}[s]}`,children:e}),m=e=>(0,r.jsx)("button",{...e,className:["inline-flex items-center justify-center rounded-xl px-4 py-2.5 text-sm font-semibold","bg-blue-600 text-white hover:bg-blue-700 focus:ring-4 focus:ring-blue-300","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors duration-200",e.className||""].join(" ")});function x(e){return null==e||Number.isNaN(e)?"-":e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11666:(e,s,a)=>{Promise.resolve().then(a.bind(a,60198)),Promise.resolve().then(a.bind(a,72472))},13992:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=a(65239),t=a(48088),i=a(88170),o=a.n(i),l=a(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);a.d(s,n);let d={children:["",{children:["proposta-modular",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,78e3)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\proposta-modular\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,54431)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,54413)),"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\app\\proposta-modular\\page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/proposta-modular/page",pathname:"/proposta-modular",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36102:(e,s,a)=>{"use strict";a.d(s,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\gladi\\\\Documents\\\\gladpros-nextjs\\\\src\\\\modules\\\\propostas\\\\ui\\\\PropostaFormModular.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\modules\\propostas\\ui\\PropostaFormModular.tsx","default")},39596:(e,s,a)=>{"use strict";a.d(s,{ClientesProvider:()=>t});var r=a(12907);let t=(0,r.registerClientReference)(function(){throw Error("Attempted to call ClientesProvider() from the server but ClientesProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\modules\\propostas\\ui\\ClientesContext.tsx","ClientesProvider");(0,r.registerClientReference)(function(){throw Error("Attempted to call useClientes() from the server but useClientes is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\gladi\\Documents\\gladpros-nextjs\\src\\modules\\propostas\\ui\\ClientesContext.tsx","useClientes")},48618:(e,s,a)=>{Promise.resolve().then(a.bind(a,39596)),Promise.resolve().then(a.bind(a,36102))},60198:(e,s,a)=>{"use strict";a.d(s,{ClientesProvider:()=>o,n:()=>l});var r=a(60687),t=a(43210);let i=(0,t.createContext)(void 0);function o({children:e}){let[s,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[n,d]=(0,t.useState)(null),c=async()=>{try{l(!0),d(null);let e=await fetch("/api/clientes?limit=1000");if(!e.ok)throw Error("Erro ao carregar clientes");let s=await e.json();a(s.clientes||[])}catch(e){d(e instanceof Error?e.message:"Erro desconhecido"),console.error("Erro ao carregar clientes:",e)}finally{l(!1)}};return(0,r.jsx)(i.Provider,{value:{clientes:s,loading:o,error:n,refetch:()=>{c()}},children:e})}function l(){let e=(0,t.useContext)(i);if(void 0===e)throw Error("useClientes must be used within a ClientesProvider");return e}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72472:(e,s,a)=>{"use strict";a.d(s,{default:()=>g});var r=a(60687),t=a(43210),i=a.n(t),o=a(99150),l=a(579);function n({escopo:e,onChange:s,isLoading:a=!1}){let t=a=>r=>{s({...e,[a]:r.target.value})};return(0,r.jsxs)(l.wn,{title:"Escopo do Projeto",subtitle:"Defina o t\xedtulo, resumo e descri\xe7\xe3o detalhada do trabalho a ser realizado",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"T\xedtulo da Proposta"}),(0,r.jsx)(l.pd,{placeholder:"Ex: Reforma El\xe9trica Comercial - Loja Centro",value:e.titulo||"",onChange:t("titulo"),disabled:a}),(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Este t\xedtulo aparecer\xe1 no cabe\xe7alho da proposta"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Resumo Executivo"}),(0,r.jsx)(l.TM,{rows:3,placeholder:"Breve resumo do projeto em 2-3 frases (aparecer\xe1 no in\xedcio da proposta)",value:e.resumo_executivo||"",onChange:t("resumo_executivo"),disabled:a}),(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"\uD83D\uDCA1 Um bom resumo executivo destaca o objetivo principal e o valor para o cliente"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Descri\xe7\xe3o Detalhada do Escopo"}),(0,r.jsx)(l.TM,{rows:8,placeholder:"Descreva detalhadamente o trabalho a ser realizado:      • O que ser\xe1 feito   • Onde ser\xe1 executado     • Como ser\xe1 realizado   • Quais materiais e t\xe9cnicas ser\xe3o utilizados   • Resultados esperados      Seja espec\xedfico para evitar mal-entendidos.",value:e.escopo||"",onChange:t("escopo"),disabled:a}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-slate-500",children:[(0,r.jsxs)("span",{children:[e.escopo?e.escopo.length:0," caracteres"]}),(0,r.jsx)("span",{children:"M\xednimo recomendado: 200 caracteres"})]})]})]}),(0,r.jsxs)("div",{className:"mt-6 rounded-xl bg-blue-50 p-4 border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"✅ Elementos de um escopo completo:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs text-blue-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"O que est\xe1 INCLU\xcdDO:"}),(0,r.jsxs)("ul",{className:"space-y-0.5",children:[(0,r.jsx)("li",{children:"• Servi\xe7os espec\xedficos"}),(0,r.jsx)("li",{children:"• Materiais fornecidos"}),(0,r.jsx)("li",{children:"• Locais de atua\xe7\xe3o"}),(0,r.jsx)("li",{children:"• Padr\xf5es de qualidade"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"O que est\xe1 EXCLU\xcdDO:"}),(0,r.jsxs)("ul",{className:"space-y-0.5",children:[(0,r.jsx)("li",{children:"• Servi\xe7os n\xe3o contemplados"}),(0,r.jsx)("li",{children:"• Responsabilidades do cliente"}),(0,r.jsx)("li",{children:"• Custos adicionais"}),(0,r.jsx)("li",{children:"• Limita\xe7\xf5es t\xe9cnicas"})]})]})]})]}),e.escopo&&e.escopo.length<200&&(0,r.jsx)("div",{className:"mt-4 rounded-xl bg-amber-50 p-4 border border-amber-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,r.jsx)("p",{className:"font-medium",children:"Escopo muito resumido"}),(0,r.jsx)("p",{className:"mt-1",children:"Considere adicionar mais detalhes para evitar mal-entendidos e garantir que todas as expectativas estejam alinhadas."})]})]})})]})}function d({prazos:e,onPrazosChange:s}){return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Tempo para aceite (dias)"}),(0,r.jsx)(l.pd,{type:"number",value:e.tempo_para_aceite,onChange:a=>s({...e,tempo_para_aceite:Number(a.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Validade da proposta"}),(0,r.jsx)(l.pd,{type:"date",value:e.validade_proposta,onChange:a=>s({...e,validade_proposta:a.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Prazo de execu\xe7\xe3o (dias)"}),(0,r.jsx)(l.pd,{type:"number",value:e.prazo_execucao_dias,onChange:a=>s({...e,prazo_execucao_dias:Number(a.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Janela preferencial"}),(0,r.jsx)(l.pd,{placeholder:"Seg‑Sex, 8h–17h",value:e.janela||"",onChange:a=>s({...e,janela:a.target.value})})]}),(0,r.jsxs)("div",{className:"md:col-span-4",children:[(0,r.jsx)(l.JU,{children:"Restri\xe7\xf5es de acesso"}),(0,r.jsx)(l.TM,{placeholder:"Ex.: cadastro de visitantes, carga/descarga at\xe9 16h…",value:e.restricoes||"",onChange:a=>s({...e,restricoes:a.target.value})})]})]})}function c({permite:e,onChange:s,isLoading:a=!1}){let t=a=>r=>{s({...e,[a]:r.target.value})};return(0,r.jsx)(l.wn,{title:"Licen\xe7as e Permits",subtitle:"Defina requisitos legais, normativos e de inspe\xe7\xe3o para o projeto",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Status dos Permits"}),(0,r.jsxs)(l.l6,{value:e.status,onChange:a=>{s({...e,status:a.target.value})},disabled:a,children:[(0,r.jsx)("option",{value:o.Do.NAO_NECESSARIO,children:"N\xe3o precisa"}),(0,r.jsx)("option",{value:o.Do.NECESSARIO,children:"Cliente j\xe1 possui"}),(0,r.jsx)("option",{value:o.Do.OBTIDO,children:"N\xf3s faremos"})]})]}),e.status!==o.Do.NAO_NECESSARIO&&(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Quais permits/licen\xe7as s\xe3o necess\xe1rios?"}),(0,r.jsx)(l.TM,{rows:3,placeholder:"Ex: Licen\xe7a ambiental, Alvar\xe1 de constru\xe7\xe3o, ART, etc.",value:e.quais_permites||"",onChange:t("quais_permites"),disabled:a})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Normas e Regulamenta\xe7\xf5es Aplic\xe1veis"}),(0,r.jsx)(l.TM,{rows:3,placeholder:"Ex: ABNT NBR, NR-10, NR-35, C\xf3digo de Obras Municipal, etc.",value:e.normas||"",onChange:t("normas"),disabled:a})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Inspe\xe7\xf5es e Aprova\xe7\xf5es Necess\xe1rias"}),(0,r.jsx)(l.TM,{rows:3,placeholder:"Ex: Vistoria do Corpo de Bombeiros, Inspe\xe7\xe3o de seguran\xe7a, Aprova\xe7\xe3o na concession\xe1ria, etc.",value:e.inspecoes||"",onChange:t("inspecoes"),disabled:a})]}),e.status===o.Do.NECESSARIO&&(0,r.jsx)("div",{className:"rounded-xl bg-blue-50 p-4 border border-blue-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,r.jsx)("p",{className:"font-medium",children:"Aten\xe7\xe3o: Permits necess\xe1rios"}),(0,r.jsx)("p",{className:"mt-1",children:"Certifique-se de incluir os custos e prazos para obten\xe7\xe3o dos permits no or\xe7amento e cronograma do projeto."})]})]})}),e.status===o.Do.OBTIDO&&(0,r.jsx)("div",{className:"rounded-xl bg-green-50 p-4 border border-green-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"text-sm text-green-800",children:[(0,r.jsx)("p",{className:"font-medium",children:"Permits j\xe1 obtidos"}),(0,r.jsx)("p",{className:"mt-1",children:"Confirme se todos os permits necess\xe1rios est\xe3o v\xe1lidos e atualizados."})]})]})})]})})}function m({materiais:e,onMateriaisChange:s}){let a=a=>{s(e.filter(e=>e.id!==a))},t=(a,r)=>{s(e.map(e=>e.id===a?{...e,...r}:e))};return(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[e.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-12 items-end gap-2 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)(l.JU,{required:!0,children:"C\xf3digo"}),(0,r.jsx)(l.pd,{value:e.codigo,onChange:s=>t(e.id,{codigo:s.target.value})})]}),(0,r.jsxs)("div",{className:"col-span-3",children:[(0,r.jsx)(l.JU,{required:!0,children:"Nome"}),(0,r.jsx)(l.pd,{value:e.nome,onChange:s=>t(e.id,{nome:s.target.value})})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)(l.JU,{required:!0,children:"Quantidade"}),(0,r.jsx)(l.pd,{type:"number",value:e.quantidade,onChange:s=>t(e.id,{quantidade:Number(s.target.value)})})]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)(l.JU,{required:!0,children:"Un"}),(0,r.jsx)(l.pd,{value:e.unidade,onChange:s=>t(e.id,{unidade:s.target.value})})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)(l.JU,{children:"Pre\xe7o unit. (interno)"}),(0,r.jsx)(l.pd,{type:"number",step:"0.01",value:e.preco??"",onChange:s=>t(e.id,{preco:Number(s.target.value)})})]}),(0,r.jsx)("div",{className:"col-span-2 flex items-end justify-end gap-2",children:(0,r.jsx)("button",{onClick:()=>a(e.id),className:"rounded-lg border border-rose-200 bg-white px-3 py-2 text-xs font-medium text-rose-600 hover:bg-rose-50",children:"Remover"})})]},e.id)),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:()=>{s([...e,{id:crypto.randomUUID(),codigo:"",nome:"",quantidade:1,unidade:"un",status:"necessario"}])},className:"rounded-xl bg-white px-4 py-2 text-sm font-medium text-[var(--gp-blue)] shadow-sm ring-1 ring-inset ring-slate-200 hover:bg-slate-50",children:"+ Adicionar material"})})]})}function x({etapas:e,onEtapasChange:s}){let a=a=>{s(e.filter(e=>e.id!==a))},t=(a,r)=>{s(e.map(e=>e.id===a?{...e,...r}:e))};return(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[e.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-2 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[(0,r.jsxs)("div",{className:"col-span-3",children:[(0,r.jsx)(l.JU,{required:!0,children:"Servi\xe7o"}),(0,r.jsx)(l.pd,{value:e.servico,onChange:s=>t(e.id,{servico:s.target.value})})]}),(0,r.jsxs)("div",{className:"col-span-5",children:[(0,r.jsx)(l.JU,{required:!0,children:"Descri\xe7\xe3o"}),(0,r.jsx)(l.TM,{rows:3,value:e.descricao,onChange:s=>t(e.id,{descricao:s.target.value})})]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)(l.JU,{children:"Qtd"}),(0,r.jsx)(l.pd,{type:"number",value:e.quantidade??"",onChange:s=>t(e.id,{quantidade:Number(s.target.value)})})]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)(l.JU,{children:"Un"}),(0,r.jsx)(l.pd,{value:e.unidade??"",onChange:s=>t(e.id,{unidade:s.target.value})})]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)(l.JU,{children:"Horas"}),(0,r.jsx)(l.pd,{type:"number",value:e.duracaoHoras??"",onChange:s=>t(e.id,{duracaoHoras:Number(s.target.value)})})]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)(l.JU,{children:"Custo MO"}),(0,r.jsx)(l.pd,{type:"number",step:"0.01",value:e.custoMO??"",onChange:s=>t(e.id,{custoMO:Number(s.target.value)})})]}),(0,r.jsxs)("div",{className:"col-span-12 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.JU,{children:"Status"}),(0,r.jsxs)(l.l6,{value:e.status,onChange:s=>t(e.id,{status:s.target.value}),className:"w-auto",children:[(0,r.jsx)("option",{value:"planejada",children:"Planejada"}),(0,r.jsx)("option",{value:"opcional",children:"Opcional"}),(0,r.jsx)("option",{value:"removida",children:"Removida"})]})]}),(0,r.jsx)("button",{onClick:()=>a(e.id),className:"rounded-lg border border-rose-200 bg-white px-3 py-2 text-xs font-medium text-rose-600 hover:bg-rose-50",children:"Remover"})]})]},e.id)),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:()=>{s([...e,{id:crypto.randomUUID(),servico:"",descricao:"",quantidade:1,unidade:"servi\xe7o",status:"planejada"}])},className:"rounded-xl bg-white px-4 py-2 text-sm font-medium text-[var(--gp-blue)] shadow-sm ring-1 ring-inset ring-slate-200 hover:bg-slate-50",children:"+ Adicionar etapa"})})]})}function u({comercial:e,onChange:s,isLoading:a=!1}){let t=a=>r=>{s({...e,[a]:r.target.value})},i=a=>r=>{let t=""===r.target.value?0:Number(r.target.value);s({...e,[a]:t})},o=(a,r)=>{let t=[...e.condicoes_pagamento];t[a]=r,s({...e,condicoes_pagamento:t})},n=a=>{let r=e.condicoes_pagamento.filter((e,s)=>s!==a);s({...e,condicoes_pagamento:r})};return(0,r.jsxs)(l.wn,{title:"Informa\xe7\xf5es Comerciais",subtitle:"Defina valores, condi\xe7\xf5es e detalhes comerciais da proposta",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Valor da Proposta (R$)"}),(0,r.jsx)(l.pd,{type:"number",step:"0.01",placeholder:"0.00",value:e.valor_proposta||"",onChange:i("valor_proposta"),disabled:a})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Validade da Proposta (dias)"}),(0,r.jsx)(l.pd,{type:"number",placeholder:"30",value:e.prazo_validade||"",onChange:i("prazo_validade"),disabled:a})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(l.JU,{required:!0,children:"Local de Execu\xe7\xe3o"}),(0,r.jsx)(l.pd,{placeholder:"Endere\xe7o completo onde ser\xe1 executado o servi\xe7o",value:e.local_execucao||"",onChange:t("local_execucao"),disabled:a})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsx)(l.JU,{children:"Condi\xe7\xf5es de Pagamento"}),(0,r.jsx)(l.$n,{onClick:()=>{s({...e,condicoes_pagamento:[...e.condicoes_pagamento,""]})},disabled:a,className:"text-xs",children:"+ Adicionar condi\xe7\xe3o"})]}),0===e.condicoes_pagamento.length?(0,r.jsx)("div",{className:"rounded-xl border border-dashed border-slate-300 p-6 text-center",children:(0,r.jsx)("p",{className:"text-sm text-slate-500",children:'Nenhuma condi\xe7\xe3o de pagamento definida. Clique em "Adicionar condi\xe7\xe3o" para come\xe7ar.'})}):(0,r.jsx)("div",{className:"space-y-3",children:e.condicoes_pagamento.map((e,s)=>(0,r.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(l.pd,{placeholder:`${s+1}\xaa parcela - ex: 30% na assinatura do contrato`,value:e,onChange:e=>o(s,e.target.value),disabled:a})}),(0,r.jsx)(l.$n,{onClick:()=>n(s),disabled:a,className:"bg-rose-50 text-rose-600 hover:bg-rose-100",children:"Remover"})]},s))})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)(l.JU,{children:"Observa\xe7\xf5es Comerciais"}),(0,r.jsx)(l.TM,{rows:4,placeholder:"Informa\xe7\xf5es adicionais, descontos especiais, condi\xe7\xf5es especiais, etc.",value:e.observacoes||"",onChange:t("observacoes"),disabled:a})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)(l.JU,{children:"Garantias Oferecidas"}),(0,r.jsx)(l.TM,{rows:3,placeholder:"Ex: 12 meses de garantia para materiais, 6 meses para m\xe3o de obra",value:e.garantias||"",onChange:t("garantias"),disabled:a})]})]})}function p({faturamento:e,onChange:s,isLoading:a=!1}){let t=a=>r=>{let t="percentual_sinal"===a?Number(r.target.value):r.target.value;s({...e,[a]:t})};return(0,r.jsxs)(l.wn,{title:"Faturamento e Cobran\xe7a",subtitle:"Configure como e quando o faturamento ser\xe1 realizado",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{required:!0,children:"Quando iniciar o faturamento"}),(0,r.jsxs)(l.l6,{value:e.gatilho,onChange:t("gatilho"),disabled:a,children:[(0,r.jsx)("option",{value:"na_aprovacao",children:"Na aprova\xe7\xe3o da proposta"}),(0,r.jsx)("option",{value:"por_marcos",children:"Por marcos do projeto"}),(0,r.jsx)("option",{value:"na_entrega",children:"Na entrega final"}),(0,r.jsx)("option",{value:"custom",children:"Personalizado"})]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Define quando come\xe7ar a cobrar do cliente"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Sinal/Entrada (%)"}),(0,r.jsx)(l.pd,{type:"number",min:"0",max:"100",placeholder:"30",value:e.percentual_sinal||"",onChange:t("percentual_sinal"),disabled:a})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)("div",{className:"text-sm text-slate-600 bg-slate-50 px-3 py-2.5 rounded-xl border",children:[e.percentual_sinal?`${100-e.percentual_sinal}%`:"70%"," restante"]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Forma de Pagamento Preferida"}),(0,r.jsx)(l.pd,{placeholder:"Ex: PIX, Transfer\xeancia banc\xe1ria, Boleto banc\xe1rio",value:e.forma_preferida||"",onChange:t("forma_preferida"),disabled:a})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Instru\xe7\xf5es Especiais de Faturamento"}),(0,r.jsx)(l.TM,{rows:4,placeholder:"Instru\xe7\xf5es espec\xedficas sobre faturamento, prazos de pagamento, dados para NF, etc.",value:e.instrucoes||"",onChange:t("instrucoes"),disabled:a})]})]}),(0,r.jsxs)("div",{className:"mt-6 rounded-xl bg-slate-50 p-4 border border-slate-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-slate-800 mb-3",children:"\uD83D\uDCCB Resumo do Faturamento"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-slate-600",children:"Gatilho:"}),(0,r.jsx)("div",{className:"font-medium text-slate-800",children:{na_aprovacao:"Na aprova\xe7\xe3o da proposta",por_marcos:"Por marcos do projeto",na_entrega:"Na entrega final",custom:"Personalizado"}[e.gatilho]||"Selecione..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-slate-600",children:"Divis\xe3o de pagamento:"}),(0,r.jsxs)("div",{className:"font-medium text-slate-800",children:[e.percentual_sinal,"% entrada + ",100-(e.percentual_sinal||0),"% restante"]})]}),e.forma_preferida&&(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("span",{className:"text-slate-600",children:"Forma preferida:"}),(0,r.jsx)("div",{className:"font-medium text-slate-800",children:e.forma_preferida})]})]})]}),"por_marcos"===e.gatilho&&(0,r.jsx)("div",{className:"mt-4 rounded-xl bg-blue-50 p-4 border border-blue-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,r.jsx)("p",{className:"font-medium",children:"Faturamento por marcos"}),(0,r.jsx)("p",{className:"mt-1",children:"Certifique-se de definir marcos claros nas etapas do projeto. Cada marco pode ter um percentual espec\xedfico de cobran\xe7a."})]})]})}),e.percentual_sinal>50&&(0,r.jsx)("div",{className:"mt-4 rounded-xl bg-amber-50 p-4 border border-amber-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,r.jsx)("p",{className:"font-medium",children:"Entrada alta"}),(0,r.jsx)("p",{className:"mt-1",children:"Uma entrada superior a 50% pode ser vista como agressiva pelo cliente. Considere justificar essa condi\xe7\xe3o."})]})]})})]})}function h({observacoes:e,onChange:s,isLoading:a=!1}){let t=a=>r=>{s({...e,[a]:r.target.value})};return(0,r.jsxs)(l.wn,{title:"Observa\xe7\xf5es",subtitle:"Adicione informa\xe7\xf5es complementares para o cliente e anota\xe7\xf5es internas",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Observa\xe7\xf5es para o Cliente"}),(0,r.jsx)(l.TM,{rows:4,placeholder:"Informa\xe7\xf5es que aparecer\xe3o na proposta para o cliente (condi\xe7\xf5es especiais, restri\xe7\xf5es, etc.)",value:e.obs_cliente||"",onChange:t("obs_cliente"),disabled:a}),(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"\uD83D\uDCA1 Essas observa\xe7\xf5es ser\xe3o vis\xedveis ao cliente na proposta final"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Observa\xe7\xf5es Internas (Privadas)"}),(0,r.jsx)(l.TM,{rows:4,placeholder:"Anota\xe7\xf5es internas sobre o projeto, considera\xe7\xf5es t\xe9cnicas, alertas para a equipe, etc.",value:e.obs_internas||"",onChange:t("obs_internas"),disabled:a}),(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"\uD83D\uDD12 Essas observa\xe7\xf5es s\xe3o privadas e n\xe3o aparecer\xe3o na proposta do cliente"})]})]}),(0,r.jsxs)("div",{className:"mt-6 rounded-xl bg-slate-50 p-4 border border-slate-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-slate-800 mb-2",children:"\uD83D\uDCA1 Dicas para boas observa\xe7\xf5es:"}),(0,r.jsxs)("ul",{className:"text-xs text-slate-600 space-y-1",children:[(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"Para o cliente:"})," Mencione prazos especiais, condi\xe7\xf5es de acesso, requisitos de seguran\xe7a"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"Internas:"})," Anote riscos identificados, fornecedores espec\xedficos, quest\xf5es t\xe9cnicas"]}),(0,r.jsx)("li",{children:"• Seja claro e objetivo nas informa\xe7\xf5es"}),(0,r.jsx)("li",{children:"• Use as observa\xe7\xf5es internas para registrar detalhes importantes para a execu\xe7\xe3o"})]})]})]})}function j({totais:e,interno:s,status:a,onInternoChange:t,onStatusChange:i}){let n=a===o.f6.PENDENTE_APROVACAO?"orange":a===o.f6.APROVADA?"green":"red",d=a===o.f6.RASCUNHO?"Rascunho":a===o.f6.PENDENTE_APROVACAO?"Aguardando":a===o.f6.APROVADA?"Aprovada":"Cancelada";return(0,r.jsxs)("div",{className:"order-1 flex flex-col gap-6 lg:order-2",children:[(0,r.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-start justify-between",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-slate-800",children:"Resumo de Pre\xe7o (interno)"}),(0,r.jsx)(l.Ex,{children:"Privado"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"Materiais"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.mat)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"M\xe3o de obra"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.mo)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"Terceiros"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.terce)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"Frete/Log\xedstica"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.frete)})]}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"Overhead"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.overhead)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"Margem"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.margem)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"Conting\xeancia"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.conting)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 text-sm",children:[(0,r.jsx)("span",{className:"text-slate-500",children:"Impostos"}),(0,r.jsx)("span",{className:"text-right font-medium",children:(0,l.Gl)(e.impostos)})]}),(0,r.jsx)("div",{className:"mt-3 rounded-xl bg-slate-50 p-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"font-semibold text-slate-700",children:"Pre\xe7o ao cliente (estimado)"}),(0,r.jsx)("span",{className:"text-base font-semibold text-slate-900",children:(0,l.Gl)(e.precoCliente)})]})})]}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Overhead (%)"}),(0,r.jsx)(l.pd,{type:"number",value:s.overhead_pct,onChange:e=>t({...s,overhead_pct:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Margem (%)"}),(0,r.jsx)(l.pd,{type:"number",value:s.margem_pct,onChange:e=>t({...s,margem_pct:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Impostos (%)"}),(0,r.jsx)(l.pd,{type:"number",value:s.impostos_pct,onChange:e=>t({...s,impostos_pct:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Conting\xeancia (%)"}),(0,r.jsx)(l.pd,{type:"number",value:s.contingencia_pct,onChange:e=>t({...s,contingencia_pct:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Custo materiais"}),(0,r.jsx)(l.pd,{type:"number",step:"0.01",value:s.custo_material,onChange:e=>t({...s,custo_material:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Custo m\xe3o de obra"}),(0,r.jsx)(l.pd,{type:"number",step:"0.01",value:s.custo_mo,onChange:e=>t({...s,custo_mo:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Horas MO"}),(0,r.jsx)(l.pd,{type:"number",value:s.horas_mo,onChange:e=>t({...s,horas_mo:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Terceiros"}),(0,r.jsx)(l.pd,{type:"number",step:"0.01",value:s.custo_terceiros,onChange:e=>t({...s,custo_terceiros:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.JU,{children:"Frete/Log"}),(0,r.jsx)(l.pd,{type:"number",step:"0.01",value:s.frete,onChange:e=>t({...s,frete:Number(e.target.value)})})]})]})]}),(0,r.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,r.jsx)("div",{className:"mb-4 flex items-start justify-between gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-slate-800",children:"Status da Proposta"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:"Controle o estado atual da proposta."})]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:["Status atual: ",(0,r.jsx)(l.Ex,{color:n,children:d})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>i(o.f6.APROVADA),className:"rounded-xl border border-emerald-200 bg-white px-3 py-2 text-xs font-semibold text-emerald-700 hover:bg-emerald-50",children:"Marcar aprovada"}),(0,r.jsx)("button",{onClick:()=>i(o.f6.CANCELADA),className:"rounded-xl border border-rose-200 bg-white px-3 py-2 text-xs font-semibold text-rose-700 hover:bg-rose-50",children:"Cancelar"})]})]})})]})]})}let v=({onSave:e,onSubmit:s,isLoading:a})=>(0,r.jsx)("header",{className:"sticky top-0 z-10 border-b border-slate-200 bg-white/80 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Nova Proposta (Modular)"}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Vers\xe3o componentizada com se\xe7\xf5es independentes"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:e,disabled:a,className:"rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:a?"Salvando...":"Salvar Rascunho"}),(0,r.jsx)("button",{onClick:s,disabled:a,className:"rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-50",children:a?"Enviando...":"Enviar Proposta"})]})]})})});function g(){let[e,s]=(0,t.useState)({titulo:"",escopo:"",resumo_executivo:""}),[a,l]=(0,t.useState)({tempo_para_aceite:30,validade_proposta:new Date().toISOString().split("T")[0],prazo_execucao_dias:30,janela:"",restricoes:""}),[g,b]=(0,t.useState)({status:o.Do.NAO_NECESSARIO,quais_permites:"",normas:"",inspecoes:""}),[N,f]=(0,t.useState)([]),[C,_]=(0,t.useState)([]),[A,w]=(0,t.useState)({valor_proposta:0,prazo_validade:30,local_execucao:"",condicoes_pagamento:[],observacoes:"",garantias:""}),[y,E]=(0,t.useState)({gatilho:"na_aprovacao",percentual_sinal:30,forma_preferida:"",instrucoes:""}),[P,D]=(0,t.useState)({custo_material:0,custo_mo:0,horas_mo:0,custo_terceiros:0,overhead_pct:15,margem_pct:20,impostos_pct:8,contingencia_pct:5,frete:0}),[U,O]=(0,t.useState)({obs_cliente:"",obs_internas:""}),[R,S]=(0,t.useState)(o.f6.RASCUNHO),[q,J]=(0,t.useState)(!1),M=i().useMemo(()=>{let e=P.custo_material+P.custo_mo+P.custo_terceiros+P.frete,s=e*(P.overhead_pct/100),a=(e+s)*(P.margem_pct/100),r=(e+s+a)*(P.contingencia_pct/100),t=(e+s+a+r)*(P.impostos_pct/100);return{mat:P.custo_material,mo:P.custo_mo,terce:P.custo_terceiros,frete:P.frete,overhead:s,margem:a,conting:r,impostos:t,precoCliente:e+s+a+r+t}},[P]),I=async()=>{J(!0);try{await new Promise(e=>setTimeout(e,1e3))}catch{}finally{J(!1)}},z=async()=>{J(!0);try{await new Promise(e=>setTimeout(e,2e3)),S(o.f6.PENDENTE_APROVACAO)}catch{}finally{J(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,r.jsx)(v,{onSave:I,onSubmit:z,isLoading:q}),(0,r.jsx)("main",{className:"mx-auto max-w-7xl px-6 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"order-2 space-y-8 lg:order-1 lg:col-span-2",children:[(0,r.jsx)(n,{escopo:e,onChange:s}),(0,r.jsx)(d,{prazos:a,onPrazosChange:l}),(0,r.jsx)(c,{permite:g,onChange:b}),(0,r.jsx)(m,{materiais:N,onMateriaisChange:f}),(0,r.jsx)(x,{etapas:C,onEtapasChange:_}),(0,r.jsx)(u,{comercial:A,onChange:w}),(0,r.jsx)(p,{faturamento:y,onChange:E}),(0,r.jsx)(h,{observacoes:U,onChange:O})]}),(0,r.jsx)(j,{totais:M,interno:P,status:R,onInternoChange:D,onStatusChange:S})]})})]})}},78e3:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(37413),t=a(36102),i=a(39596);function o(){return(0,r.jsx)(i.ClientesProvider,{children:(0,r.jsx)(t.default,{})})}},79551:e=>{"use strict";e.exports=require("url")},99150:(e,s,a)=>{"use strict";a.d(s,{Do:()=>t,f6:()=>r});var r=function(e){return e.RASCUNHO="RASCUNHO",e.PENDENTE_APROVACAO="PENDENTE_APROVACAO",e.APROVADA="APROVADA",e.REJEITADA="REJEITADA",e.CANCELADA="CANCELADA",e.ENVIADA="ENVIADA",e.ASSINADA="ASSINADA",e}({}),t=function(e){return e.NECESSARIO="NECESSARIO",e.NAO_NECESSARIO="NAO_NECESSARIO",e.OBTIDO="OBTIDO",e}({})}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[7719,4250,7920],()=>a(13992));module.exports=r})();